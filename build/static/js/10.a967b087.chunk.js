(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[10],{401:function(e,a,t){},721:function(e,a,t){},746:function(e,a,t){"use strict";t.r(a);var n=t(2),o=t.n(n),i=t(137),r=t(79),c=t(169),l=t(83),s=t(139),m=t(339),d=t(35);var u=function(){var e=Object(r.b)(),a=localStorage.getItem("username"),t=localStorage.getItem("id"),u=Object(r.c)((function(e){return e.profiles}));Object(n.useEffect)((function(){Object(s.trackPromise)(Object(m.a)(e,t))}),[e,t]);var f=Object(n.useState)(!1),b=Object(i.a)(f,2),p=b[0],g=b[1],_=Object(d.g)();console.log(u.profiles);var v="";u.profiles.length>0&&localStorage.setItem("profile_image",u.profiles[0].profile_image_url);var E=localStorage.getItem("profile_image");return null!==E&&(v=E),o.a.createElement("li",{className:"nav-item dropdown no-arrow"},o.a.createElement("p",{className:"nav-link dropdown-toggle",onClick:function(){g(!p)},id:"userDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.a.createElement("span",{className:"mr-2 d-none d-lg-inline small cadet"},a),o.a.createElement("img",{className:"img-profile rounded-circle",alt:"",src:null!==v?v:"https://source.unsplash.com/QAB-WJcbgJk/60x60"})),o.a.createElement("div",{className:"dropdown-menu dropdown-menu-right shadow animated--grow-in ".concat(p?"show":""),"aria-labelledby":"userDropdown"},o.a.createElement("p",{className:"dropdown-item",onClick:function(){_.push({pathname:"/account"})},"data-toggle":"modal","data-target":"#logoutModal"},o.a.createElement("i",{className:"fas fa-user fa-sm fa-fw mr-2 text-gray-400"}),"Ch\u1ec9nh th\xf4ng tin c\xe1c nh\xe2n"),o.a.createElement("p",{className:"dropdown-item",onClick:function(){_.push({pathname:"/change-password"})},"data-toggle":"modal","data-target":"#change-password"},o.a.createElement("i",{className:"fas fa-key fa-sm fa-fw mr-2 text-gray-400"}),"Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u"),o.a.createElement("p",{className:"dropdown-item logout-btn",onClick:function(){var a=localStorage.getItem("id");localStorage.clear(),e(Object(l.d)()),e(Object(c.a)(a,{status:null}))},"data-toggle":"modal","data-target":"#logoutModal"},o.a.createElement("i",{className:"fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"}),"Logout")))},f=(t(721),t(65)),b=t(135);function p(){var e="Bearer "+localStorage.getItem("access_token");return function(a){a(Object(f.j)()),fetch("".concat("https://server.kidsdrawing.site/api/v1","/notification-database"),{method:"GET",headers:{Authorization:e,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(e){if(e.ok)return e.json();if(403!==e.status)throw Error(e.statusText);a(Object(b.a)()),a(p())})).then((function(e){a(Object(f.l)()),console.log(e.body.notifications),e.body.notifications.map((function(e,t){var n={idx:e.id,name:e.name,description:e.description,time:e.time};return console.log(e),a(Object(f.k)(n))}))})).catch((function(e){a(Object(f.i)(e)),console.log("error")}))}}var g=t(215),_=t(276);t(401);var v=function(){var e=Object(r.b)(),a=Object(r.c)((function(e){return e.notifys})),t=Object(r.c)((function(e){return e.user_read_notifications})),c=Object(n.useState)(!1),l=Object(i.a)(c,2),s=l[0],m=l[1],u=localStorage.getItem("id"),f=0;null!==u&&(f=parseInt(u)),Object(n.useEffect)((function(){e(Object(g.a)(f)),e(p())}),[e,f]),console.log(a.notifys),console.log(t.user_not_readed_notifications);var b=[],v=0;t.user_not_readed_notifications.map((function(e,t){return a.notifys.map((function(a){if(a.idx===e.notification_id){var t={notification_id:e.notification_id,notification_name:a.name,user_id:e.user_id,notification_time:a.time,notification_desciption:a.description,is_read:e.is_read};return v++,b.push(t)}return a}))}));var E=[];t.user_readed_notifications.map((function(e,t){return a.notifys.map((function(a){if(a.idx===e.notification_id&&v<=6){var t={notification_id:e.notification_id,notification_name:a.name,user_id:e.user_id,notification_time:a.time,notification_desciption:a.description,is_read:e.is_read};return v++,E.push(t)}return a}))}));var h=Object(d.g)();return o.a.createElement("li",{className:"nav-item dropdown no-arrow"},o.a.createElement("p",{className:"nav-link dropdown-toggle waves-effect waves-light",id:"navbarDropdownMenuLink-5","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true",onClick:function(){m(!s)}},o.a.createElement("span",{className:"badge badge-danger ml-2"},t.user_not_readed_notifications.length),o.a.createElement("i",{className:"fas fa-bell"})),o.a.createElement("div",{className:"dropdown-menu dropdown-menu-right shadow dropdown-secondary animated--grow-in ".concat(s?"show":""," notification"),"aria-labelledby":"userDropdown"},o.a.createElement("ul",{className:"list-notify"},b.map((function(a,t){return o.a.createElement("li",{key:t},o.a.createElement("p",{className:"dropdown-item waves-light",onClick:function(){!function(a){m(!s),e(Object(_.a)({user_id:f,notification_id:a.notification_id,is_read:!0})),localStorage.removeItem("notification_id"),localStorage.setItem("notification_id",a.notification_id.toString()),localStorage.removeItem("user_id"),localStorage.setItem("user_id",a.user_id.toString()),localStorage.removeItem("notification_name"),localStorage.setItem("notification_name",a.notification_name),localStorage.removeItem("notification_desciption"),localStorage.setItem("notification_desciption",a.notification_desciption),localStorage.removeItem("notification_time"),localStorage.setItem("notification_time",a.notification_time);h.push({pathname:"/notification/detail"})}(a)},"data-toggle":"modal","data-target":"#logoutModal"},o.a.createElement("i",{className:"fas fa-bell fa-sm fa-fw mr-2"}),a.notification_name,o.a.createElement("span",{className:"badge badge-danger ml-2"},"*")))}))),o.a.createElement("div",{className:"view-all-notify text-center"},o.a.createElement("a",{href:"/#",onClick:function(e){e.preventDefault();h.push({pathname:"/notification"}),m(!s)}},"Xem to\xe0n b\u1ed9"))))},E=t(214),h=t(203),w=t(221);var N=function(){var e=Object(r.b)(),a=Object(r.c)((function(e){return e.notifys})),t=Object(r.c)((function(e){return e.user_read_notifications})),c=Object(n.useState)(!1),m=Object(i.a)(c,2),u=m[0],f=m[1],b=Object(r.c)((function(e){return e.user_register_join_semesters})),v=localStorage.getItem("id"),N=0;null!==v&&(N=parseInt(v));var j=localStorage.getItem("role"),k=[],O="";null!==j&&(k=j.split(","),O=k[0]),Object(n.useEffect)((function(){e(Object(g.a)(N)),e(p())}),[e,N]),Object(n.useEffect)((function(){"PARENT"===O?Object(s.trackPromise)(Object(h.a)(e,N)):"STUDENT"===O&&Object(s.trackPromise)(Object(w.a)(e,N))}),[e,N,O]),console.log(a.notifys),console.log(t.user_not_readed_notifications);var S=[],I=0;t.user_not_readed_notifications.map((function(e,t){return a.notifys.map((function(a){if(a.idx===e.notification_id){var t={notification_id:e.notification_id,notification_name:a.name,user_id:e.user_id,notification_time:a.time,notification_desciption:a.description,is_read:e.is_read};return I++,S.push(t)}return a}))})),t.user_readed_notifications.map((function(e,t){return a.notifys.map((function(a){if(a.idx===e.notification_id&&I<=6){var t={notification_id:e.notification_id,notification_name:a.name,user_id:e.user_id,notification_time:a.time,notification_desciption:a.description,is_read:e.is_read};return I++,S.push(t)}return a}))}));var y=Object(d.g)();return"PARENT"===O||"STUDENT"===O?o.a.createElement("li",{className:"nav-item dropdown no-arrow"},o.a.createElement("p",{className:"nav-link dropdown-toggle waves-effect waves-light",id:"navbarDropdownMenuLink-5","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true",onClick:function(){y.push({pathname:"/cart"})}},o.a.createElement("span",{className:"badge badge-danger ml-2"},b.waiting.length),o.a.createElement(E.e,null)),o.a.createElement("div",{className:"dropdown-menu dropdown-menu-right shadow dropdown-secondary animated--grow-in ".concat(u?"show":""," notification"),"aria-labelledby":"userDropdown"},o.a.createElement("ul",{className:"list-notify"},S.map((function(a,t){return o.a.createElement("li",{key:t},o.a.createElement("p",{className:"dropdown-item waves-light",onClick:function(){!function(a){f(!u),e(Object(_.a)({user_id:N,notification_id:a.notification_id,is_read:!0})),localStorage.removeItem("notification_id"),localStorage.setItem("notification_id",a.notification_id.toString()),localStorage.removeItem("user_id"),localStorage.setItem("user_id",a.user_id.toString()),localStorage.removeItem("notification_name"),localStorage.setItem("notification_name",a.notification_name),localStorage.removeItem("notification_desciption"),localStorage.setItem("notification_desciption",a.notification_desciption),localStorage.removeItem("notification_time"),localStorage.setItem("notification_time",a.notification_time);y.push({pathname:"/notification/detail"})}(a)},"data-toggle":"modal","data-target":"#logoutModal"},o.a.createElement("i",{className:"fas fa-bell fa-sm fa-fw mr-2"}),a.notification_name,o.a.createElement("span",{className:"badge badge-danger ml-2"},"*")))})),[].map((function(a,t){return o.a.createElement("li",null,o.a.createElement("p",{className:"dropdown-item waves-light",onClick:function(){return e(Object(l.d)())},"data-toggle":"modal","data-target":"#logoutModal"},o.a.createElement("i",{className:"fas fa-bell fa-sm fa-fw mr-2 text-gray-400"}),a.notification_name))}))),o.a.createElement("div",{className:"view-all-notify text-center"},o.a.createElement("a",{href:"/notification"},"Xem to\xe0n b\u1ed9")))):o.a.createElement(o.a.Fragment,null)};a.default=function(){var e=Object(r.c)((function(e){return e.root.page})),a=localStorage.getItem("role"),t="";null!==a&&(t=a.split(",")[0]);var n=Object(d.g)();function i(){var a=localStorage.getItem("path"),t="";null!=a&&(t=a),console.log("hello0"),null!=e.subArea&&(console.log("hello"),n.push({pathname:t}))}return"ADMIN"===t?o.a.createElement("nav",{className:"navbar navbar-expand navbar-light bg-custom-dark topbar mb-4 static-top shadow"},o.a.createElement("ol",{className:"breadcrumb dark-breadcrumb"},o.a.createElement("li",{className:"breadcrumb-item teacher-breadcrumb-item"},o.a.createElement("p",{className:"mb-2 text-gray-400",onClick:function(){i()}},e?e.area:null," / ",o.a.createElement("span",null,e?e.subArea:null)))),o.a.createElement("ul",{className:"navbar-nav ml-auto"},o.a.createElement(v,null),o.a.createElement("div",{className:"topbar-divider d-none d-sm-block"}),o.a.createElement(u,null))):"TEACHER"===t?o.a.createElement("nav",{className:"navbar navbar-expand navbar-light bg-custom-dark topbar mb-4 static-top",id:"teacher_navbar"},o.a.createElement("ol",{className:"breadcrumb dark-breadcrumb",id:"teacher_breadcrumb"},o.a.createElement("li",{className:"breadcrumb-item teacher-breadcrumb-item"},o.a.createElement("p",{className:"mb-2 text-gray-400",id:"home-teacher",onClick:function(){i()}},e?e.area:null," / ",o.a.createElement("span",null,e?e.subArea:null)))),o.a.createElement("ul",{className:"navbar-nav ml-auto"},o.a.createElement(v,null),o.a.createElement("div",{className:"topbar-divider d-none d-sm-block"}),o.a.createElement(u,null))):"PARENT"===t||"STUDENT"===t?o.a.createElement("nav",{className:"navbar navbar-expand navbar-light bg-custom-dark topbar mb-4",id:"teacher_navbar"},o.a.createElement("ol",{className:"breadcrumb dark-breadcrumb",id:"teacher_breadcrumb"},o.a.createElement("li",{className:"breadcrumb-item teacher-breadcrumb-item"},o.a.createElement("p",{className:"mb-2 text-gray-400",id:"home-teacher",onClick:function(){i()}},e?e.area:null," / ",o.a.createElement("span",null,e?e.subArea:null)))),o.a.createElement("ul",{className:"navbar-nav ml-auto"},o.a.createElement(N,null),o.a.createElement("div",{className:"topbar-divider d-none d-sm-block"}),o.a.createElement(v,null),o.a.createElement("div",{className:"topbar-divider d-none d-sm-block"}),o.a.createElement(u,null))):o.a.createElement("nav",{className:"navbar navbar-expand navbar-light bg-custom-dark topbar mb-4 static-top shadow"},o.a.createElement("ol",{className:"breadcrumb dark-breadcrumb"},o.a.createElement("li",{className:"breadcrumb-item teacher-breadcrumb-item"},o.a.createElement("p",{className:"mb-2 text-gray-400",id:"home-teacher",onClick:function(){i()}},e?e.area:null," / ",o.a.createElement("span",null,e?e.subArea:null)))),o.a.createElement("ul",{className:"navbar-nav ml-auto"},o.a.createElement(v,null),o.a.createElement("div",{className:"topbar-divider d-none d-sm-block"}),o.a.createElement(u,null)))}}}]);
//# sourceMappingURL=10.a967b087.chunk.js.map