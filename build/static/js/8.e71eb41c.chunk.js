(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[8],{135:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var o=a(83),r=a(169);function n(){var e=localStorage.getItem("refresh_token");return function(t){fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})}).then((function(e){if(!e.ok){if(500!==e.status)throw Error(e.statusText);var a=localStorage.getItem("id");t(Object(r.a)(a,{status:null})),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("username"),localStorage.removeItem("role"),localStorage.removeItem("id"),localStorage.removeItem("contest_id"),localStorage.removeItem("schedule_id"),t(Object(o.d)())}return e.json()})).then((function(e){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.setItem("access_token",e.accessToken),localStorage.setItem("refresh_token",e.refreshToken)})).catch((function(e){console.log("error")}))}}},142:function(e,t,a){"use strict";var o=a(137),r=a(2),n=a.n(r);t.a=function(e){var t=Object(r.useState)(!1),a=Object(o.a)(t,2),c=a[0],s=a[1],l=Object(r.useState)(""),i=Object(o.a)(l,2),u=i[0],m=i[1],d=Object(r.useState)(""),p=Object(o.a)(d,2),h=p[0],g=p[1],f=Object(r.useState)(""),b=Object(o.a)(f,2)[1];return n.a.createElement("div",null,n.a.createElement("label",{htmlFor:e.id.toString()},e.label),n.a.createElement("input",{value:e.value,type:e.type,onChange:function(t){var a=["","",t.target.value],r=a[0],n=a[1],l=a[2],i=!l&&e.required?["Value cannot be empty","is-invalid"]:["","is-valid"],u=Object(o.a)(i,2);if(r=u[0],n=u[1],!r){var d=e.maxLength&&l&&l.length>e.maxLength?["Value can't have more than ".concat(e.maxLength," characters"),"is-invalid"]:["","is-valid"],p=Object(o.a)(d,2);r=p[0],n=p[1]}e.onChange({value:l,error:r,touched:c,field:e.field}),s(!0),m(r),g(n),b(l)},className:"form-control ".concat(e.inputClass," ").concat(h),id:"id_".concat(e.label),placeholder:e.placeholder}),u?n.a.createElement("div",{className:"invalid-feedback"},u):null)}},169:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var o=a(10),r=a(135);function n(e,t){var a="Bearer "+localStorage.getItem("access_token");return function(c){c(Object(o.C)()),fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/user/status/").concat(e),{method:"PUT",headers:{Authorization:a,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"},body:JSON.stringify(t)}).then((function(a){if(a.ok)return a;if(403!==a.status)throw Error(a.statusText);c(Object(r.a)()),c(n(e,t))})).then((function(a){console.log(a),console.log(e),c(Object(o.D)(t))})).catch((function(e){c(Object(o.B)(e)),console.log("error")}))}}},201:function(e,t,a){},748:function(e,t,a){"use strict";a.r(t);var o=a(1),r=a(137),n=a(2),c=a.n(n),s=a(79),l=a(142),i=(a(201),a(136)),u=(a(170),a(35)),m=a(45),d=a(135);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}t.default=function(){var e=Object(s.b)(),t=Object(u.g)(),a=Object(n.useState)({username:{error:"",value:""},password:{error:"",value:""}}),h=Object(r.a)(a,2),g=h[0],f=h[1];function b(){return g.password.error||!g.password.value}return c.a.createElement("div",{className:"container-fluid ",id:"login-page"},c.a.createElement("div",{className:"row justify-content-center"},c.a.createElement("div",{className:"col-xl-10 col-lg-10 col-md-9"},c.a.createElement("h2",{id:"text-logo",onClick:function(){t.push("/landing-page")}},"KidsDrawing"))),c.a.createElement(i.a,null),c.a.createElement("div",{className:"row justify-content-center"},c.a.createElement("div",{className:"col-xl-10 col-lg-12 col-md-9"},c.a.createElement("div",{className:"card o-hidden border-0  my-5"},c.a.createElement("div",{className:"card-body p-0"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6 d-none d-lg-block text-center",id:"image-login-page"},c.a.createElement("img",{src:"https://res.cloudinary.com/djtmwajiu/image/upload/v1667290306/o0ymcs4lblpy2hfmisyq.png",alt:"First slide"})),c.a.createElement("div",{className:"col-lg-6 shadow-lg"},c.a.createElement("div",{className:"p-5"},c.a.createElement("div",{className:"text-center"},c.a.createElement("h1",{className:"h4 text-gray-900 mb-4"},"Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u")),c.a.createElement("form",{className:"user",onSubmit:function(t){if(t.preventDefault(),!b()){var a=i.b.loading("\u0110ang x\xe1c th\u1ef1c. Vui l\xf2ng \u0111\u1ee3i gi\xe2y l\xe1t...",{position:i.b.POSITION.TOP_CENTER});e(function e(t,a){var o="Bearer "+localStorage.getItem("access_token");return function(r){r(Object(m.k)()),fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/password-reset-token/user/savePassword"),{method:"POST",headers:{Authorization:o,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"},body:JSON.stringify(t)}).then((function(o){if(o.ok)return o;if(403!==o.status)throw Error(o.statusText);r(Object(d.a)()),r(e(t,a))})).then((function(e){console.log(e),i.b.update(a,{render:"\u0110\u1ed5i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng!",type:"success",isLoading:!1,position:i.b.POSITION.TOP_CENTER,autoClose:1e3})})).catch((function(e){r(Object(m.j)(e)),i.b.update(a,{render:"\u0110\u1ed5i m\u1eadt kh\u1ea9u kh\xf4ng th\xe0nh c\xf4ng!",type:"error",isLoading:!1,position:i.b.POSITION.TOP_CENTER,closeButton:!0}),console.log("error")}))}}({newPassword:g.password.value,token:localStorage.getItem("token_reset_password")},a))}}},c.a.createElement("div",{className:"form-group"},c.a.createElement(l.a,{id:"input_password",field:"password",value:g.password.value,onChange:function(e){f(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},g,Object(o.a)({},e.field,{error:e.error,value:e.value})))},required:!0,maxLength:100,type:"password",label:"M\u1eadt kh\u1ea9u m\u1edbi",placeholder:""})),c.a.createElement("button",{className:"btn btn-primary btn-user btn-block ".concat(b()?"disabled":""),type:"submit"},"G\u1eedi"))))))))))}}}]);
//# sourceMappingURL=8.e71eb41c.chunk.js.map