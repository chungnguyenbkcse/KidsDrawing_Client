(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[18],{744:function(e,t,a){"use strict";a.r(t);var o=a(137),n=a(2),r=a.n(n),c=a(79),l=a(89),s=a(154),i=a(83),u=a(140),m=a(38),d=a(92),h=a(1),g=a(145),p=a(136),f=a(42),b=a(135);var v=a(177);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}var j=function(e){var t=Object(c.b)(),a=Object(c.c)((function(e){return e.anonymous_notifications})),l=a.selectedAnonymousNotification,s=a.modificationState===d.a.Create;l&&!s||(l={id:0,name:"",description:"",time:""});var i=Object(n.useState)({name:{error:"",value:l.name},description:{error:"",value:l.description},type_send:{error:"",value:"Chon g\u1eedi t\u1edbi"}}),u=Object(o.a)(i,2),j=u[0],E=u[1];function y(e){E(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},j,Object(h.a)({},e.field,{error:e.error,value:e.value})))}function C(){return j.name.error||!j.name.value}return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"row text-left"},r.a.createElement("div",{className:"col-xl-12 col-lg-12"},r.a.createElement("div",{className:"card shadow mb-4"},r.a.createElement("div",{className:"card-header py-3"},r.a.createElement("h6",{className:"m-0 font-weight-bold text-green"},s?"T\u1ea1o":"S\u1eeda"," \u0111\u1ed9 tu\u1ed5i")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(a){if(a.preventDefault(),!C()){e.isCheck(!1);var o=s?m.i:m.k;!function(e,a){if(l){var o=p.b.loading("\u0110ang x\u1eed l\xfd y\xeau c\u1ea7u. Vui l\xf2ng \u0111\u1ee3i gi\xe2y l\xe1t...",{position:p.b.POSITION.TOP_CENTER});a===m.i&&("admin"==e.type_send.value?t(function e(t,a){var o="Bearer "+localStorage.getItem("access_token");return function(n){n(Object(f.n)()),fetch("".concat("https://server.kidsdrawing.site/api/v1","/sendEmail/admin"),{method:"POST",headers:{Authorization:o,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"},body:JSON.stringify(t)}).then((function(o){if(o.ok)return o;if(403!==o.status)throw Error(o.statusText);n(Object(b.a)()),n(e(t,a))})).then((function(e){console.log(e),p.b.update(a,{render:"G\u1eedi th\xf4ng b\xe1o th\xe0nh c\xf4ng",type:"success",isLoading:!1,position:p.b.POSITION.TOP_CENTER,autoClose:1e3})})).catch((function(e){n(Object(f.m)(e)),p.b.update(a,{render:"G\u1eedi th\xf4ng b\xe1o kh\xf4ng th\xe0nh c\xf4ng",type:"error",isLoading:!1,position:p.b.POSITION.TOP_CENTER,closeButton:!0}),console.log("error")}))}}({subject:e.name.value,msgBody:e.description.value},o)):"teacher"==e.type_send.value?t(function e(t,a){var o="Bearer "+localStorage.getItem("access_token");return function(n){n(Object(f.n)()),fetch("".concat("https://server.kidsdrawing.site/api/v1","/sendEmail/teacher"),{method:"POST",headers:{Authorization:o,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"},body:JSON.stringify(t)}).then((function(o){if(o.ok)return o;if(403!==o.status)throw Error(o.statusText);n(Object(b.a)()),n(e(t,a))})).then((function(e){console.log(e),p.b.update(a,{render:"G\u1eedi th\xf4ng b\xe1o th\xe0nh c\xf4ng",type:"success",isLoading:!1,position:p.b.POSITION.TOP_CENTER,autoClose:1e3})})).catch((function(e){n(Object(f.m)(e)),p.b.update(a,{render:"G\u1eedi th\xf4ng b\xe1o kh\xf4ng th\xe0nh c\xf4ng",type:"error",isLoading:!1,position:p.b.POSITION.TOP_CENTER,closeButton:!0}),console.log("error")}))}}({subject:e.name.value,msgBody:e.description.value},o)):t(function e(t,a){var o="Bearer "+localStorage.getItem("access_token");return function(n){n(Object(f.n)()),fetch("".concat("https://server.kidsdrawing.site/api/v1","/sendEmail/student"),{method:"POST",headers:{Authorization:o,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"},body:JSON.stringify(t)}).then((function(o){if(o.ok)return o;if(403!==o.status)throw Error(o.statusText);n(Object(b.a)()),n(e(t,a))})).then((function(e){console.log(e),p.b.update(a,{render:"G\u1eedi th\xf4ng b\xe1o th\xe0nh c\xf4ng",type:"success",isLoading:!1,position:p.b.POSITION.TOP_CENTER,autoClose:1e3})})).catch((function(e){n(Object(f.m)(e)),p.b.update(a,{render:"G\u1eedi th\xf4ng b\xe1o kh\xf4ng th\xe0nh c\xf4ng",type:"error",isLoading:!1,position:p.b.POSITION.TOP_CENTER,closeButton:!0}),console.log("error")}))}}({subject:e.name.value,msgBody:e.description.value},o))),console.log({name:e.name.value,description:e.description.value,type_send:e.type_send}),t(Object(m.j)()),t(Object(m.l)(d.a.None))}}(j,o)}}},r.a.createElement("div",{className:"form-group"},r.a.createElement(g.a,{id:"input_email",value:j.name.value,field:"name",onChange:y,required:!0,maxLength:2e4,label:"T\xean",placeholder:""})),r.a.createElement("div",{className:"form-group"},r.a.createElement(g.a,{id:"input_description",field:"description",value:j.description.value,onChange:y,required:!1,maxLength:1e5,label:"Mi\xeau t\u1ea3",placeholder:""})),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement(v.a,{id:"input_type_send",field:"type_send",value:j.type_send.value,onChange:y,required:!0,label:"G\u1eedi t\u1edbi",options:[{name:"To\xe0n h\u1ec7 th\u1ed1ng",value:"admin"},{name:"Ch\u1ec9 gi\xe1o vi\xean",value:"teacher"},{name:"H\u1ecdc vi\xean v\xe0 ph\u1ee5 huynh",value:"student"}]}))),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.isCheck(!1),void t(Object(m.l)(d.a.None))}},"H\u1ee7y"),r.a.createElement("button",{type:"submit",className:"btn btn-success left-margin ".concat(C()?"disabled":"")},"L\u01b0u")))))))},E=a(146),y=a(51);function C(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://server.kidsdrawing.site/api/v1","/classes/schedule-all"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(b.a)()),e(C(e))})).then((function(t){e(Object(y.k)(t)),e(Object(y.l)()),t.body.schedule.map((function(t,a){var o=Object.values(t),n=Object.keys(t);return o.map((function(t,a){return console.log(t),Object.values(t).map((function(t){return Object.values(t).map((function(t){return t.map((function(t){if(console.log(t),0!==t.length){var a={class_name:n[0],start_time:t[0],end_time:t[1]};e(Object(y.i)(a))}return t}))}))}))}))}))})).catch((function(t){e(Object(y.j)(t)),console.log("error")}))}var _=a(743),I=a(736),S=a(403),T=a(737),w=a(738),k=a(739),A=(a(186),a(187),a(188),a(189),a(190),a(191),a(192),a(193),a(194),a(195),a(139));function N(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://server.kidsdrawing.site/api/v1","/user-register-join-semester/total-money"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(b.a)()),e(N(e))})).then((function(e){localStorage.removeItem("total_money"),localStorage.setItem("total_money",e.body.total_money)})).catch((function(e){console.log("error")}))}function P(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://server.kidsdrawing.site/api/v1","/user/teacher/total"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(b.a)()),e(P(e))})).then((function(e){localStorage.removeItem("total_teacher"),localStorage.setItem("total_teacher",e.body.user)})).catch((function(e){console.log("error")}))}function x(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://server.kidsdrawing.site/api/v1","/user/parent/total"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(b.a)()),e(x(e))})).then((function(e){localStorage.removeItem("total_parent"),localStorage.setItem("total_parent",e.body.user)})).catch((function(e){console.log("error")}))}function G(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://server.kidsdrawing.site/api/v1","/user/student/total"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(b.a)()),e(G(e))})).then((function(e){localStorage.removeItem("total_student"),localStorage.setItem("total_student",e.body.user)})).catch((function(e){console.log("error")}))}var B=a(40);function D(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://server.kidsdrawing.site/api/v1","/course/total"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(b.a)()),e(D(e))})).then((function(t){e(Object(B.o)(t)),localStorage.removeItem("total_course"),localStorage.setItem("total_course",t.body.course)})).catch((function(t){e(Object(B.m)(t)),console.log("error")}))}var H=a(8);function z(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://server.kidsdrawing.site/api/v1","/contest/total"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(b.a)()),e(z(e))})).then((function(t){e(Object(H.G)(t)),localStorage.removeItem("total_contest"),localStorage.setItem("total_contest",t.body.contest)})).catch((function(t){e(Object(H.E)(t)),console.log("error")}))}t.default=function(){var e=Object(A.usePromiseTracker)().promiseInProgress,t=Object(n.useState)(!1),a=Object(o.a)(t,2),h=a[0],g=a[1];function f(e){g(!1)}var b=Object(c.c)((function(e){return e.anonymous_notifications})),v=localStorage.getItem("total_student"),O=0;null!==v&&(O=parseInt(v));var y=localStorage.getItem("total_parent"),B=0;null!==y&&(B=parseInt(y));var H=localStorage.getItem("total_teacher"),L=0;null!==H&&(L=parseInt(H));var R=localStorage.getItem("total_course"),J=0;null!==R&&(J=parseInt(R));var F=localStorage.getItem("total_contest"),V=0;null!==F&&(V=parseInt(F));var q=localStorage.getItem("total_money"),M=0;null!==q&&(M=parseFloat(q));var U=Object(c.c)((function(e){return e.schedule_time_classes}));console.log(U);var K=[];U.schedule_time_classes.map((function(e,t){return void 0!==e&&null!=e?K.push({Id:t,Subject:void 0!==e.class_name&&null!==e.class_name?e.class_name:"",StartTime:new Date(e.start_time),EndTime:new Date(e.end_time),IsAllDay:!1}):1})),console.log(K);var W=Object(c.b)();W(Object(l.b)("Trang ch\u1ee7","")),localStorage.setItem("path","/");var Y=localStorage.getItem("access_token"),$=localStorage.getItem("refresh_token");return Object(n.useEffect)((function(){if(null!==Y&&null!==$&&void 0!==Y&&void 0!==$){var e=Object(u.a)(Y),t=Object(u.a)($),a=e.exp,o=t.exp,n=Date.now()/1e3;console.log(a),console.log(n),a<n&&o<n?(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("username"),localStorage.removeItem("role"),localStorage.removeItem("id"),localStorage.removeItem("contest_id"),localStorage.removeItem("schedule_id"),W(Object(i.d)())):(Object(A.trackPromise)(N(W)),Object(A.trackPromise)(P(W)),Object(A.trackPromise)(x(W)),Object(A.trackPromise)(G(W)),Object(A.trackPromise)(D(W)),Object(A.trackPromise)(z(W)),Object(A.trackPromise)(C(W)))}}),[W,Y,$]),e?r.a.createElement("div",{className:"loader"}):r.a.createElement(n.Fragment,null,r.a.createElement(p.a,null),r.a.createElement("h1",{className:"h3 mb-2 text-gray-800"},"Trang ch\u1ee7"),r.a.createElement("div",{className:"row"},r.a.createElement(s.a,{title:"KH\xd3A H\u1eccC",text:"".concat(J),icon:"book",class:"primary"}),r.a.createElement(s.a,{title:"CU\u1ed8C THI",text:"".concat(V),icon:"book",class:"danger"}),r.a.createElement(s.a,{title:"DOANH THU",text:"$".concat(M),icon:"dollar-sign",class:"success"})),r.a.createElement("div",{className:"row"},r.a.createElement(s.a,{title:"H\u1eccC VI\xcaN",text:"".concat(O),icon:"user",class:"primary"}),r.a.createElement(s.a,{title:"GI\xc1O VI\xcaN",text:"".concat(L),icon:"user",class:"danger"}),r.a.createElement(s.a,{title:"PH\u1ee4 HUYNH",text:"".concat(B),icon:"user",class:"danger"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-6 col-md-4 mb-4"},r.a.createElement("button",{className:"btn btn-success btn-green",onClick:function(){W(Object(m.l)(d.a.Create)),g(!0)}},r.a.createElement("i",{className:"fas fa fa-plus"}),"G\u1eedi th\xf4ng b\xe1o"))),r.a.createElement(E.a,{open:h,onClose:function(){return g(!1)},closeOnDocumentClick:!0},r.a.createElement(r.a.Fragment,null,function(){if(b.modificationState===d.a.Create)return r.a.createElement(j,{isCheck:f})}())),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-12 col-lg-12"},r.a.createElement("div",{className:"card shadow mb-4"},r.a.createElement("div",{className:"card-header py-3"},r.a.createElement("h6",{className:"m-0 font-weight-bold text-green"},"L\u1ecbch h\u1ecdc chi ti\u1ebft")),r.a.createElement("div",{className:"card-body"},r.a.createElement(_.a,{height:"550px",currentView:"Month",selectedDate:new Date,eventSettings:{dataSource:K,fields:{id:"Id",subject:{name:"Subject"},isAllDay:{name:"IsAllDay"},startTime:{name:"StartTime"},endTime:{name:"EndTime"}}}},r.a.createElement(I.b,null,r.a.createElement(I.a,{option:"Day"}),r.a.createElement(I.a,{option:"Week"}),r.a.createElement(I.a,{option:"Month"})),r.a.createElement(S.c,{services:[T.a,w.a,k.a]})),";")))))}}}]);
//# sourceMappingURL=18.2bee5f99.chunk.js.map