(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[10],{400:function(e,a,t){},720:function(e,a,t){},745:function(e,a,t){"use strict";t.r(a);var n=t(2),i=t.n(n),o=t(137),r=t(79),c=t(169),l=t(83),m=t(139),s=t(339);var d=function(){var e=Object(r.b)(),a=localStorage.getItem("username"),t=localStorage.getItem("id"),d=Object(r.c)((function(e){return e.profiles}));Object(n.useEffect)((function(){Object(m.trackPromise)(Object(s.a)(e,t))}),[e,t]);var u=Object(n.useState)(!1),f=Object(o.a)(u,2),b=f[0],g=f[1];console.log(d.profiles);var p="";d.profiles.length>0&&localStorage.setItem("profile_image",d.profiles[0].profile_image_url);var _=localStorage.getItem("profile_image");return null!==_&&(p=_),i.a.createElement("li",{className:"nav-item dropdown no-arrow"},i.a.createElement("p",{className:"nav-link dropdown-toggle",onClick:function(){g(!b)},id:"userDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},i.a.createElement("span",{className:"mr-2 d-none d-lg-inline small cadet"},a),i.a.createElement("img",{className:"img-profile rounded-circle",alt:"",src:null!==p?p:"https://source.unsplash.com/QAB-WJcbgJk/60x60"})),i.a.createElement("div",{className:"dropdown-menu dropdown-menu-right shadow animated--grow-in ".concat(b?"show":""),"aria-labelledby":"userDropdown"},i.a.createElement("a",{className:"dropdown-item",onClick:function(){},href:"/account","data-toggle":"modal","data-target":"#logoutModal"},i.a.createElement("i",{className:"fas fa-user fa-sm fa-fw mr-2 text-gray-400"}),"Ch\u1ec9nh th\xf4ng tin c\xe1c nh\xe2n"),i.a.createElement("a",{className:"dropdown-item",onClick:function(){},href:"/change-password","data-toggle":"modal","data-target":"#change-password"},i.a.createElement("i",{className:"fas fa-key fa-sm fa-fw mr-2 text-gray-400"}),"Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u"),i.a.createElement("p",{className:"dropdown-item logout-btn",onClick:function(){var a=localStorage.getItem("id");localStorage.clear(),e(Object(l.d)()),e(Object(c.a)(a,{status:null}))},"data-toggle":"modal","data-target":"#logoutModal"},i.a.createElement("i",{className:"fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"}),"Logout")))},u=(t(720),t(35)),f=t(65),b=t(135);function g(){var e="Bearer "+localStorage.getItem("access_token");return function(a){a(Object(f.j)()),fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/notification-database"),{method:"GET",headers:{Authorization:e,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(e){if(e.ok)return e.json();if(403!==e.status)throw Error(e.statusText);a(Object(b.a)()),a(g())})).then((function(e){a(Object(f.l)()),console.log(e.body.notifications),e.body.notifications.map((function(e,t){var n={idx:e.id,name:e.name,description:e.description,time:e.time};return console.log(e),a(Object(f.k)(n))}))})).catch((function(e){a(Object(f.i)(e)),console.log("error")}))}}var p=t(215),_=t(276);t(400);var h=function(){var e=Object(r.b)(),a=Object(r.c)((function(e){return e.notifys})),t=Object(r.c)((function(e){return e.user_read_notifications})),c=Object(n.useState)(!1),l=Object(o.a)(c,2),m=l[0],s=l[1],d=localStorage.getItem("id"),f=0;null!==d&&(f=parseInt(d)),Object(n.useEffect)((function(){e(Object(p.a)(f)),e(g())}),[e,f]),console.log(a.notifys),console.log(t.user_not_readed_notifications);var b=[],h=0;t.user_not_readed_notifications.map((function(e,t){return a.notifys.map((function(a){if(a.idx===e.notification_id){var t={notification_id:e.notification_id,notification_name:a.name,user_id:e.user_id,notification_time:a.time,notification_desciption:a.description,is_read:e.is_read};return h++,b.push(t)}return a}))}));var v=[];t.user_readed_notifications.map((function(e,t){return a.notifys.map((function(a){if(a.idx===e.notification_id&&h<=6){var t={notification_id:e.notification_id,notification_name:a.name,user_id:e.user_id,notification_time:a.time,notification_desciption:a.description,is_read:e.is_read};return h++,v.push(t)}return a}))}));var E=Object(u.g)();return i.a.createElement("li",{className:"nav-item dropdown no-arrow"},i.a.createElement("p",{className:"nav-link dropdown-toggle waves-effect waves-light",id:"navbarDropdownMenuLink-5","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true",onClick:function(){s(!m)}},i.a.createElement("span",{className:"badge badge-danger ml-2"},t.user_not_readed_notifications.length),i.a.createElement("i",{className:"fas fa-bell"})),i.a.createElement("div",{className:"dropdown-menu dropdown-menu-right shadow dropdown-secondary animated--grow-in ".concat(m?"show":""," notification"),"aria-labelledby":"userDropdown"},i.a.createElement("ul",{className:"list-notify"},b.map((function(a,t){return i.a.createElement("li",{key:t},i.a.createElement("p",{className:"dropdown-item waves-light",onClick:function(){!function(a){s(!m),e(Object(_.a)({user_id:f,notification_id:a.notification_id,is_read:!0})),localStorage.removeItem("notification_id"),localStorage.setItem("notification_id",a.notification_id.toString()),localStorage.removeItem("user_id"),localStorage.setItem("user_id",a.user_id.toString()),localStorage.removeItem("notification_name"),localStorage.setItem("notification_name",a.notification_name),localStorage.removeItem("notification_desciption"),localStorage.setItem("notification_desciption",a.notification_desciption),localStorage.removeItem("notification_time"),localStorage.setItem("notification_time",a.notification_time);E.push({pathname:"/notification/detail"})}(a)},"data-toggle":"modal","data-target":"#logoutModal"},i.a.createElement("i",{className:"fas fa-bell fa-sm fa-fw mr-2"}),a.notification_name,i.a.createElement("span",{className:"badge badge-danger ml-2"},"*")))}))),i.a.createElement("div",{className:"view-all-notify text-center"},i.a.createElement("a",{href:"/#",onClick:function(e){e.preventDefault();E.push({pathname:"/notification"}),s(!m)}},"Xem to\xe0n b\u1ed9"))))},v=t(214),E=t(203),N=t(221);var w=function(){var e=Object(r.b)(),a=Object(r.c)((function(e){return e.notifys})),t=Object(r.c)((function(e){return e.user_read_notifications})),c=Object(n.useState)(!1),s=Object(o.a)(c,2),d=s[0],f=s[1],b=Object(r.c)((function(e){return e.user_register_join_semesters})),h=localStorage.getItem("id"),w=0;null!==h&&(w=parseInt(h));var j=localStorage.getItem("role"),k=[],O="";null!==j&&(k=j.split(","),O=k[0]),Object(n.useEffect)((function(){e(Object(p.a)(w)),e(g())}),[e,w]),Object(n.useEffect)((function(){"PARENT"===O?Object(m.trackPromise)(Object(E.a)(e,w)):"STUDENT"===O&&Object(m.trackPromise)(Object(N.a)(e,w))}),[e,w,O]),console.log(a.notifys),console.log(t.user_not_readed_notifications);var S=[],y=0;t.user_not_readed_notifications.map((function(e,t){return a.notifys.map((function(a){if(a.idx===e.notification_id){var t={notification_id:e.notification_id,notification_name:a.name,user_id:e.user_id,notification_time:a.time,notification_desciption:a.description,is_read:e.is_read};return y++,S.push(t)}return a}))})),t.user_readed_notifications.map((function(e,t){return a.notifys.map((function(a){if(a.idx===e.notification_id&&y<=6){var t={notification_id:e.notification_id,notification_name:a.name,user_id:e.user_id,notification_time:a.time,notification_desciption:a.description,is_read:e.is_read};return y++,S.push(t)}return a}))}));var I=Object(u.g)();return"PARENT"===O||"STUDENT"===O?i.a.createElement("li",{className:"nav-item dropdown no-arrow"},i.a.createElement("p",{className:"nav-link dropdown-toggle waves-effect waves-light",id:"navbarDropdownMenuLink-5","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true",onClick:function(){I.push({pathname:"/cart"})}},i.a.createElement("span",{className:"badge badge-danger ml-2"},b.waiting.length),i.a.createElement(v.e,null)),i.a.createElement("div",{className:"dropdown-menu dropdown-menu-right shadow dropdown-secondary animated--grow-in ".concat(d?"show":""," notification"),"aria-labelledby":"userDropdown"},i.a.createElement("ul",{className:"list-notify"},S.map((function(a,t){return i.a.createElement("li",{key:t},i.a.createElement("p",{className:"dropdown-item waves-light",onClick:function(){!function(a){f(!d),e(Object(_.a)({user_id:w,notification_id:a.notification_id,is_read:!0})),localStorage.removeItem("notification_id"),localStorage.setItem("notification_id",a.notification_id.toString()),localStorage.removeItem("user_id"),localStorage.setItem("user_id",a.user_id.toString()),localStorage.removeItem("notification_name"),localStorage.setItem("notification_name",a.notification_name),localStorage.removeItem("notification_desciption"),localStorage.setItem("notification_desciption",a.notification_desciption),localStorage.removeItem("notification_time"),localStorage.setItem("notification_time",a.notification_time);I.push({pathname:"/notification/detail"})}(a)},"data-toggle":"modal","data-target":"#logoutModal"},i.a.createElement("i",{className:"fas fa-bell fa-sm fa-fw mr-2"}),a.notification_name,i.a.createElement("span",{className:"badge badge-danger ml-2"},"*")))})),[].map((function(a,t){return i.a.createElement("li",null,i.a.createElement("p",{className:"dropdown-item waves-light",onClick:function(){return e(Object(l.d)())},"data-toggle":"modal","data-target":"#logoutModal"},i.a.createElement("i",{className:"fas fa-bell fa-sm fa-fw mr-2 text-gray-400"}),a.notification_name))}))),i.a.createElement("div",{className:"view-all-notify text-center"},i.a.createElement("a",{href:"/notification"},"Xem to\xe0n b\u1ed9")))):i.a.createElement(i.a.Fragment,null)};a.default=function(){var e=Object(r.c)((function(e){return e.root.page})),a=localStorage.getItem("role"),t="";null!==a&&(t=a.split(",")[0]);var n=Object(u.g)();function o(){var a=localStorage.getItem("path"),t="";null!=a&&(t=a),console.log("hello0"),null!=e.subArea&&(console.log("hello"),n.push({pathname:t}))}return"ADMIN"===t?i.a.createElement("nav",{className:"navbar navbar-expand navbar-light bg-custom-dark topbar mb-4 static-top shadow"},i.a.createElement("ol",{className:"breadcrumb dark-breadcrumb"},i.a.createElement("li",{className:"breadcrumb-item teacher-breadcrumb-item"},i.a.createElement("p",{className:"mb-2 text-gray-400",id:"home-teacher",onClick:function(){o()}},e?e.area:null)),i.a.createElement("li",{className:"breadcrumb-item teacher-breadcrumb-item"},i.a.createElement("p",{className:"mb-2 text-gray-400",id:"home-teacher"},e?e.subArea:null))),i.a.createElement("ul",{className:"navbar-nav ml-auto"},i.a.createElement(h,null),i.a.createElement("div",{className:"topbar-divider d-none d-sm-block"}),i.a.createElement(d,null))):"TEACHER"===t?i.a.createElement("nav",{className:"navbar navbar-expand navbar-light bg-custom-dark topbar mb-4 static-top",id:"teacher_navbar"},i.a.createElement("ol",{className:"breadcrumb dark-breadcrumb",id:"teacher_breadcrumb"},i.a.createElement("li",{className:"breadcrumb-item teacher-breadcrumb-item"},i.a.createElement("p",{className:"mb-2 text-gray-400",id:"home-teacher",onClick:function(){o()}},e?e.area:null)),i.a.createElement("li",{className:"breadcrumb-item teacher-breadcrumb-item"},i.a.createElement("p",{className:"mb-2 text-gray-400",id:"home-teacher"},e?e.subArea:null))),i.a.createElement("ul",{className:"navbar-nav ml-auto"},i.a.createElement(h,null),i.a.createElement("div",{className:"topbar-divider d-none d-sm-block"}),i.a.createElement(d,null))):"PARENT"===t||"STUDENT"===t?i.a.createElement("nav",{className:"navbar navbar-expand navbar-light bg-custom-dark topbar mb-4",id:"teacher_navbar"},i.a.createElement("ol",{className:"breadcrumb dark-breadcrumb",id:"teacher_breadcrumb"},i.a.createElement("li",{className:"breadcrumb-item teacher-breadcrumb-item"},i.a.createElement("p",{className:"mb-2 text-gray-400",id:"home-teacher",onClick:function(){o()}},e?e.area:null)),i.a.createElement("li",{className:"breadcrumb-item teacher-breadcrumb-item"},i.a.createElement("p",{className:"mb-2 text-gray-400",id:"home-teacher"},e?e.subArea:null))),i.a.createElement("ul",{className:"navbar-nav ml-auto"},i.a.createElement(w,null),i.a.createElement("div",{className:"topbar-divider d-none d-sm-block"}),i.a.createElement(h,null),i.a.createElement("div",{className:"topbar-divider d-none d-sm-block"}),i.a.createElement(d,null))):i.a.createElement("nav",{className:"navbar navbar-expand navbar-light bg-custom-dark topbar mb-4 static-top shadow"},i.a.createElement("ol",{className:"breadcrumb dark-breadcrumb"},i.a.createElement("li",{className:"breadcrumb-item teacher-breadcrumb-item"},i.a.createElement("p",{className:"mb-2 text-gray-400",id:"home-teacher",onClick:function(){o()}},e?e.area:null)),i.a.createElement("li",{className:"breadcrumb-item teacher-breadcrumb-item"},i.a.createElement("p",{className:"mb-2 text-gray-400",id:"home-teacher"},e?e.subArea:null))),i.a.createElement("ul",{className:"navbar-nav ml-auto"},i.a.createElement(h,null),i.a.createElement("div",{className:"topbar-divider d-none d-sm-block"}),i.a.createElement(d,null)))}}}]);
//# sourceMappingURL=10.0999e426.chunk.js.map