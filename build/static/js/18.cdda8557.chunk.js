(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[18],{743:function(e,t,a){"use strict";a.r(t);var o=a(137),n=a(2),c=a.n(n),r=a(79),l=a(89),s=a(152),i=a(83),u=a(140),m=a(38),h=a(92),p=a(1),d=a(142),g=a(136),f=a(44),b=a(135);var v=a(177);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}var j=function(e){var t=Object(r.b)(),a=Object(r.c)((function(e){return e.anonymous_notifications})),l=a.selectedAnonymousNotification,s=a.modificationState===h.a.Create;l&&!s||(l={id:0,name:"",description:"",time:""});var i=Object(n.useState)({name:{error:"",value:l.name},description:{error:"",value:l.description},type_send:{error:"",value:"Chon g\u1eedi t\u1edbi"}}),u=Object(o.a)(i,2),j=u[0],E=u[1];function y(e){E(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},j,Object(p.a)({},e.field,{error:e.error,value:e.value})))}function _(){return j.name.error||!j.name.value}return c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"row text-left"},c.a.createElement("div",{className:"col-xl-12 col-lg-12"},c.a.createElement("div",{className:"card shadow mb-4"},c.a.createElement("div",{className:"card-header py-3"},c.a.createElement("h6",{className:"m-0 font-weight-bold text-green"},s?"T\u1ea1o":"S\u1eeda"," \u0111\u1ed9 tu\u1ed5i")),c.a.createElement("div",{className:"card-body"},c.a.createElement("form",{onSubmit:function(a){if(a.preventDefault(),!_()){e.isCheck(!1);var o=s?m.i:m.k;!function(e,a){if(l){var o=g.b.loading("\u0110ang x\u1eed l\xfd y\xeau c\u1ea7u. Vui l\xf2ng \u0111\u1ee3i gi\xe2y l\xe1t...",{position:g.b.POSITION.TOP_CENTER});a===m.i&&t(function e(t,a,o){var n="Bearer "+localStorage.getItem("access_token");return function(c){c(Object(f.n)()),fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/sendEmail/").concat(t),{method:"POST",headers:{Authorization:n,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"},body:JSON.stringify(a)}).then((function(n){if(n.ok)return n;if(403!==n.status)throw Error(n.statusText);c(Object(b.a)()),c(e(t,a,o))})).then((function(e){console.log(e),g.b.update(o,{render:"G\u1eedi th\xf4ng b\xe1o th\xe0nh c\xf4ng",type:"success",isLoading:!1,position:g.b.POSITION.TOP_CENTER,autoClose:1e3})})).catch((function(e){c(Object(f.m)(e)),g.b.update(o,{render:"G\u1eedi th\xf4ng b\xe1o kh\xf4ng th\xe0nh c\xf4ng",type:"error",isLoading:!1,position:g.b.POSITION.TOP_CENTER,closeButton:!0}),console.log("error")}))}}(e.type_send.value,{subject:e.name.value,msgBody:e.description.value,attachment:""},o)),console.log({name:e.name.value,description:e.description.value,type_send:e.type_send}),t(Object(m.j)()),t(Object(m.l)(h.a.None))}}(j,o)}}},c.a.createElement("div",{className:"form-group"},c.a.createElement(d.a,{id:"input_email",value:j.name.value,field:"name",onChange:y,required:!0,maxLength:2e4,label:"T\xean",placeholder:""})),c.a.createElement("div",{className:"form-group"},c.a.createElement(d.a,{id:"input_description",field:"description",value:j.description.value,onChange:y,required:!1,maxLength:1e5,label:"Mi\xeau t\u1ea3",placeholder:""})),c.a.createElement("div",{className:"form-row"},c.a.createElement("div",{className:"form-group col-md-6"},c.a.createElement(v.a,{id:"input_type_send",field:"type_send",value:j.type_send.value,onChange:y,required:!0,label:"G\u1eedi t\u1edbi",options:[{name:"To\xe0n h\u1ec7 th\u1ed1ng",value:"admin"},{name:"Ch\u1ec9 gi\xe1o vi\xean",value:"teacher"},{name:"H\u1ecdc vi\xean v\xe0 ph\u1ee5 huynh",value:"student"}]}))),c.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.isCheck(!1),void t(Object(m.l)(h.a.None))}},"H\u1ee7y"),c.a.createElement("button",{type:"submit",className:"btn btn-success left-margin ".concat(_()?"disabled":"")},"L\u01b0u")))))))},E=a(147),y=a(50);function _(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/classes/schedule-all"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(b.a)()),e(_(e))})).then((function(t){e(Object(y.k)(t)),e(Object(y.l)()),t.body.schedule.map((function(t,a){var o=Object.values(t),n=Object.keys(t);return o.map((function(t,a){return console.log(t),Object.values(t).map((function(t){return Object.values(t).map((function(t){return t.map((function(t){if(console.log(t),0!==t.length){var a={class_name:n[0],start_time:t[0],end_time:t[1]};e(Object(y.i)(a))}return t}))}))}))}))}))})).catch((function(t){e(Object(y.j)(t)),console.log("error")}))}var I=a(742),w=a(735),C=a(402),S=a(736),T=a(737),A=a(738),k=(a(186),a(187),a(188),a(189),a(190),a(191),a(192),a(193),a(194),a(195),a(139));function N(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/user-register-join-semester/total-money"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(b.a)()),e(N(e))})).then((function(e){localStorage.removeItem("total_money"),localStorage.setItem("total_money",e.body.total_money)})).catch((function(e){console.log("error")}))}function x(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/user/teacher/total"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(b.a)()),e(x(e))})).then((function(e){localStorage.removeItem("total_teacher"),localStorage.setItem("total_teacher",e.body.user)})).catch((function(e){console.log("error")}))}function P(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/user/parent/total"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(b.a)()),e(P(e))})).then((function(e){localStorage.removeItem("total_parent"),localStorage.setItem("total_parent",e.body.user)})).catch((function(e){console.log("error")}))}function z(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/user/student/total"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(b.a)()),e(z(e))})).then((function(e){localStorage.removeItem("total_student"),localStorage.setItem("total_student",e.body.user)})).catch((function(e){console.log("error")}))}var D=a(40);function G(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/course/total"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(b.a)()),e(G(e))})).then((function(t){e(Object(D.o)(t)),localStorage.removeItem("total_course"),localStorage.setItem("total_course",t.body.course)})).catch((function(t){e(Object(D.m)(t)),console.log("error")}))}var H=a(8);function B(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/contest/total"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(b.a)()),e(B(e))})).then((function(t){e(Object(H.G)(t)),localStorage.removeItem("total_contest"),localStorage.setItem("total_contest",t.body.contest)})).catch((function(t){e(Object(H.E)(t)),console.log("error")}))}t.default=function(){var e=Object(k.usePromiseTracker)().promiseInProgress,t=Object(n.useState)(!1),a=Object(o.a)(t,2),p=a[0],d=a[1];function f(e){d(!1)}var b=Object(r.c)((function(e){return e.anonymous_notifications})),v=localStorage.getItem("total_student"),O=0;null!==v&&(O=parseInt(v));var y=localStorage.getItem("total_parent"),D=0;null!==y&&(D=parseInt(y));var H=localStorage.getItem("total_teacher"),L=0;null!==H&&(L=parseInt(H));var F=localStorage.getItem("total_course"),V=0;null!==F&&(V=parseInt(F));var q=localStorage.getItem("total_contest"),J=0;null!==q&&(J=parseInt(q));var M=localStorage.getItem("total_money"),R=0;null!==M&&(R=parseFloat(M));var U=Object(r.c)((function(e){return e.schedule_time_classes}));console.log(U);var K=[];U.schedule_time_classes.map((function(e,t){return void 0!==e&&null!=e?K.push({Id:t,Subject:void 0!==e.class_name&&null!==e.class_name?e.class_name:"",StartTime:new Date(e.start_time),EndTime:new Date(e.end_time),IsAllDay:!1}):1})),console.log(K);var W=Object(r.b)();W(Object(l.b)("Trang ch\u1ee7","")),localStorage.setItem("path","/");var Y=localStorage.getItem("access_token"),$=localStorage.getItem("refresh_token");return Object(n.useEffect)((function(){if(null!==Y&&null!==$&&void 0!==Y&&void 0!==$){var e=Object(u.a)(Y),t=Object(u.a)($),a=e.exp,o=t.exp,n=Date.now()/1e3;console.log(a),console.log(n),a<n&&o<n?(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("username"),localStorage.removeItem("role"),localStorage.removeItem("id"),localStorage.removeItem("contest_id"),localStorage.removeItem("schedule_id"),W(Object(i.d)())):(Object(k.trackPromise)(N(W)),Object(k.trackPromise)(x(W)),Object(k.trackPromise)(P(W)),Object(k.trackPromise)(z(W)),Object(k.trackPromise)(G(W)),Object(k.trackPromise)(B(W)),Object(k.trackPromise)(_(W)))}}),[W,Y,$]),e?c.a.createElement("div",{className:"loader"}):c.a.createElement(n.Fragment,null,c.a.createElement(g.a,null),c.a.createElement("h1",{className:"h3 mb-2 text-gray-800"},"Trang ch\u1ee7"),c.a.createElement("div",{className:"row"},c.a.createElement(s.a,{title:"KH\xd3A H\u1eccC",text:"".concat(V),icon:"book",class:"primary"}),c.a.createElement(s.a,{title:"CU\u1ed8C THI",text:"".concat(J),icon:"book",class:"danger"}),c.a.createElement(s.a,{title:"DOANH THU",text:"$".concat(R),icon:"dollar-sign",class:"success"})),c.a.createElement("div",{className:"row"},c.a.createElement(s.a,{title:"H\u1eccC VI\xcaN",text:"".concat(O),icon:"user",class:"primary"}),c.a.createElement(s.a,{title:"GI\xc1O VI\xcaN",text:"".concat(L),icon:"user",class:"danger"}),c.a.createElement(s.a,{title:"PH\u1ee4 HUYNH",text:"".concat(D),icon:"user",class:"danger"})),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-xl-6 col-md-4 mb-4"},c.a.createElement("button",{className:"btn btn-success btn-green",onClick:function(){W(Object(m.l)(h.a.Create)),d(!0)}},c.a.createElement("i",{className:"fas fa fa-plus"}),"G\u1eedi th\xf4ng b\xe1o"))),c.a.createElement(E.a,{open:p,onClose:function(){return d(!1)},closeOnDocumentClick:!0},c.a.createElement(c.a.Fragment,null,function(){if(b.modificationState===h.a.Create)return c.a.createElement(j,{isCheck:f})}())),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-xl-12 col-lg-12"},c.a.createElement("div",{className:"card shadow mb-4"},c.a.createElement("div",{className:"card-header py-3"},c.a.createElement("h6",{className:"m-0 font-weight-bold text-green"},"L\u1ecbch h\u1ecdc chi ti\u1ebft")),c.a.createElement("div",{className:"card-body"},c.a.createElement(I.a,{height:"550px",currentView:"Month",selectedDate:new Date,eventSettings:{dataSource:K,fields:{id:"Id",subject:{name:"Subject"},isAllDay:{name:"IsAllDay"},startTime:{name:"StartTime"},endTime:{name:"EndTime"}}}},c.a.createElement(w.b,null,c.a.createElement(w.a,{option:"Day"}),c.a.createElement(w.a,{option:"Week"}),c.a.createElement(w.a,{option:"Month"})),c.a.createElement(C.c,{services:[S.a,T.a,A.a]})),";")))))}}}]);
//# sourceMappingURL=18.cdda8557.chunk.js.map