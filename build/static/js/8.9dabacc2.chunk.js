(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[8],{135:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(83),o=a(169);function n(){var e=localStorage.getItem("refresh_token");return function(t){fetch("".concat("https://server.kidsdrawing.site/api/v1","/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})}).then((function(e){if(!e.ok){if(500!==e.status)throw Error(e.statusText);var a=localStorage.getItem("id");t(Object(o.a)(a,{status:null})),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("username"),localStorage.removeItem("role"),localStorage.removeItem("id"),localStorage.removeItem("contest_id"),localStorage.removeItem("schedule_id"),t(Object(r.d)())}return e.json()})).then((function(e){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.setItem("access_token",e.accessToken),localStorage.setItem("refresh_token",e.refreshToken)})).catch((function(e){console.log("error")}))}}},145:function(e,t,a){"use strict";var r=a(137),o=a(2),n=a.n(o);t.a=function(e){var t=Object(o.useState)(!1),a=Object(r.a)(t,2),c=a[0],l=a[1],s=Object(o.useState)(""),i=Object(r.a)(s,2),u=i[0],m=i[1],d=Object(o.useState)(""),g=Object(r.a)(d,2),h=g[0],p=g[1],f=Object(o.useState)(""),b=Object(r.a)(f,2)[1];return n.a.createElement("div",null,n.a.createElement("label",{htmlFor:e.id.toString()},e.label),n.a.createElement("input",{value:e.value,type:e.type,onChange:function(t){var a=["","",t.target.value],o=a[0],n=a[1],s=a[2],i=!s&&e.required?["Value cannot be empty","is-invalid"]:["","is-valid"],u=Object(r.a)(i,2);if(o=u[0],n=u[1],!o){var d=e.maxLength&&s&&s.length>e.maxLength?["Value can't have more than ".concat(e.maxLength," characters"),"is-invalid"]:["","is-valid"],g=Object(r.a)(d,2);o=g[0],n=g[1]}e.onChange({value:s,error:o,touched:c,field:e.field}),l(!0),m(o),p(n),b(s)},className:"form-control ".concat(e.inputClass," ").concat(h),id:"id_".concat(e.label),placeholder:e.placeholder}),u?n.a.createElement("div",{className:"invalid-feedback"},u):null)}},169:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(10),o=a(135);function n(e,t){var a="Bearer "+localStorage.getItem("access_token");return function(c){c(Object(r.C)()),fetch("".concat("https://server.kidsdrawing.site/api/v1","/user/status/").concat(e),{method:"PUT",headers:{Authorization:a,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"},body:JSON.stringify(t)}).then((function(a){if(a.ok)return a;if(403!==a.status)throw Error(a.statusText);c(Object(o.a)()),c(n(e,t))})).then((function(a){console.log(a),console.log(e),c(Object(r.D)(t))})).catch((function(e){c(Object(r.B)(e)),console.log("error")}))}}},201:function(e,t,a){},749:function(e,t,a){"use strict";a.r(t);var r=a(1),o=a(137),n=a(2),c=a.n(n),l=a(79),s=a(145),i=(a(201),a(136)),u=(a(170),a(35)),m=a(45),d=a(135);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}t.default=function(){var e=Object(l.b)(),t=Object(u.g)(),a=Object(n.useState)({username:{error:"",value:""},password:{error:"",value:""}}),h=Object(o.a)(a,2),p=h[0],f=h[1];function b(){return p.password.error||!p.password.value}return c.a.createElement("div",{className:"container-fluid ",id:"login-page"},c.a.createElement("div",{className:"row justify-content-center"},c.a.createElement("div",{className:"col-xl-10 col-lg-10 col-md-9"},c.a.createElement("h2",{id:"text-logo",onClick:function(){t.push("/landing-page")}},"KidsDrawing"))),c.a.createElement(i.a,null),c.a.createElement("div",{className:"row justify-content-center"},c.a.createElement("div",{className:"col-xl-10 col-lg-12 col-md-9"},c.a.createElement("div",{className:"card o-hidden border-0  my-5"},c.a.createElement("div",{className:"card-body p-0"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6 d-none d-lg-block text-center",id:"image-login-page"},c.a.createElement("img",{src:"https://res.cloudinary.com/djtmwajiu/image/upload/v1667290306/o0ymcs4lblpy2hfmisyq.png",alt:"First slide"})),c.a.createElement("div",{className:"col-lg-6 shadow-lg"},c.a.createElement("div",{className:"p-5"},c.a.createElement("div",{className:"text-center"},c.a.createElement("h1",{className:"h4 text-gray-900 mb-4"},"Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u")),c.a.createElement("form",{className:"user",onSubmit:function(t){if(t.preventDefault(),!b()){var a=i.b.loading("\u0110ang x\xe1c th\u1ef1c. Vui l\xf2ng \u0111\u1ee3i gi\xe2y l\xe1t...",{position:i.b.POSITION.TOP_CENTER});e(function e(t,a){var r="Bearer "+localStorage.getItem("access_token");return function(o){o(Object(m.k)()),fetch("".concat("https://server.kidsdrawing.site/api/v1","/password-reset-token/user/savePassword"),{method:"POST",headers:{Authorization:r,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"},body:JSON.stringify(t)}).then((function(r){if(r.ok)return r;if(403!==r.status)throw Error(r.statusText);o(Object(d.a)()),o(e(t,a))})).then((function(e){console.log(e),i.b.update(a,{render:"\u0110\u1ed5i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng!",type:"success",isLoading:!1,position:i.b.POSITION.TOP_CENTER,autoClose:1e3})})).catch((function(e){o(Object(m.j)(e)),i.b.update(a,{render:"\u0110\u1ed5i m\u1eadt kh\u1ea9u kh\xf4ng th\xe0nh c\xf4ng!",type:"error",isLoading:!1,position:i.b.POSITION.TOP_CENTER,closeButton:!0}),console.log("error")}))}}({newPassword:p.password.value,token:localStorage.getItem("token_reset_password")},a))}}},c.a.createElement("div",{className:"form-group"},c.a.createElement(s.a,{id:"input_password",field:"password",value:p.password.value,onChange:function(e){f(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},p,Object(r.a)({},e.field,{error:e.error,value:e.value})))},required:!0,maxLength:100,type:"text",label:"M\u1eadt kh\u1ea9u m\u1edbi",placeholder:""})),c.a.createElement("button",{className:"btn btn-primary btn-user btn-block ".concat(b()?"disabled":""),type:"submit"},"G\u1eedi"))))))))))}}}]);
//# sourceMappingURL=8.9dabacc2.chunk.js.map