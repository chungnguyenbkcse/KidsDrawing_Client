{"version":3,"sources":["components/TopMenu/TopMenuAccount.tsx","common/service/Notify/GetNotify.tsx","components/TopMenu/TopNotification.tsx","components/TopMenu/TopMenuCart.tsx","components/TopMenu/TopMenu.tsx"],"names":["TopMenuAccount","dispatch","useDispatch","username","localStorage","getItem","id","profiles","useSelector","state","useEffect","trackPromise","getProfile","useState","isShow","setShow","history","useHistory","console","log","profile_image","length","setItem","profile_image_url","id_x","className","onClick","role","data-toggle","aria-haspopup","aria-expanded","alt","src","aria-labelledby","push","pathname","data-target","clear","logout","putStatusUser","status","getNotify","bearer","fetchDataRequest","fetch","process","method","headers","then","response","ok","json","Error","statusText","postRefreshToken","data","removeNotifyAll","body","notifications","map","ele","index","notification","idx","name","description","time","initialNotify","catch","error","fetchDataError","TopMenuNotification","notifys","user_read_notifications","user_id","parseInt","getUserReadNotification","user_not_readed_notifications","data_not_read","total","notification_id","item","notification_name","notification_time","notification_desciption","is_read","data_readed","user_readed_notifications","key","props","putUserReadNotification","removeItem","toString","routeChange","href","e","preventDefault","TopMenuCart","user_register_join_semesters","rolePrivilege","roleUser","split","getUserRegisterJoinSemesterByPayer","getUserRegisterJoinSemesterByStudent","waiting","TopMenu","page","root","handleRoute","idxxx","path","subArea","area"],"mappings":"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","file":"static/js/10.a967b087.chunk.js","sourcesContent":["import React, { useState, Dispatch, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { putStatusUser } from \"../../common/service/User/UpdateStatusUser\";\nimport { logout } from \"../../store/actions/account.actions\";\nimport { trackPromise } from \"react-promise-tracker\";\nimport { IProfileState, IStateType } from \"../../store/models/root.interface\";\nimport { getProfile } from \"../../common/service/User/GetProfile\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction TopMenuAccount(): JSX.Element {\n  const dispatch: Dispatch<any> = useDispatch();\n  const username: string | null = localStorage.getItem('username');\n  const id = localStorage.getItem('id')\n  const profiles: IProfileState = useSelector((state: IStateType) => state.profiles);\n  useEffect(() => {\n    trackPromise(getProfile(dispatch, id))\n  }, [dispatch, id])\n  const [isShow, setShow] = useState(false);\n\n  const history = useHistory();\n\n  function changeRoute1(){\n    let path = '/account'; \n      history.push({\n          pathname: path,\n      });\n  }\n\n  function changeRoute2(){\n    let path = '/change-password'; \n      history.push({\n          pathname: path,\n      });\n  }\n\n  console.log(profiles.profiles)\n  let profile_image = \"\"\n  if (profiles.profiles.length > 0 ){\n    localStorage.setItem('profile_image', profiles.profiles[0].profile_image_url)\n  }\n\n  var id_x = localStorage.getItem('profile_image');\n  if (id_x !== null) {\n    profile_image = id_x;\n  }\n\n  return (\n\n    <li className=\"nav-item dropdown no-arrow\">\n      <p className=\"nav-link dropdown-toggle\"\n        onClick={() => {\n          setShow(!isShow);\n        }}\n        id=\"userDropdown\"\n        role=\"button\"\n        data-toggle=\"dropdown\"\n        aria-haspopup=\"true\"\n        aria-expanded=\"false\">\n        <span className=\"mr-2 d-none d-lg-inline small cadet\">{username}</span>\n        <img className=\"img-profile rounded-circle\" alt=\"\"\n          src={profile_image !== null ? profile_image :  \"https://source.unsplash.com/QAB-WJcbgJk/60x60\"} />\n      </p>\n\n      <div className={`dropdown-menu dropdown-menu-right shadow animated--grow-in ${(isShow) ? \"show\" : \"\"}`}\n        aria-labelledby=\"userDropdown\">\n        <p className=\"dropdown-item\"\n        onClick={() =>{changeRoute1()}}\n        data-toggle=\"modal\"\n        data-target=\"#logoutModal\">\n          <i className=\"fas fa-user fa-sm fa-fw mr-2 text-gray-400\"></i>\n          Chỉnh thông tin các nhân\n        </p>\n        <p className=\"dropdown-item\"\n        onClick={() =>{changeRoute2()}}\n        data-toggle=\"modal\"\n        data-target=\"#change-password\">\n          <i className=\"fas fa-key fa-sm fa-fw mr-2 text-gray-400\"></i>\n          Thay đổi mật khẩu\n        </p>\n        <p className=\"dropdown-item logout-btn\"\n        onClick={() => {\n          let id = localStorage.getItem('id');\n          localStorage.clear();\n          dispatch(logout())\n          dispatch(putStatusUser(id, {\n            status: null\n          }))\n        }}\n        data-toggle=\"modal\"\n        data-target=\"#logoutModal\">\n          <i className=\"fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400\"></i>\n          Logout\n        </p>\n      </div>\n    </li>\n  );\n};\n\nexport default TopMenuAccount;\n","import { fetchDataRequest, fetchDataError, removeNotifyAll, initialNotify } from \"../../../store/actions/notify.action\";\r\nimport { INotify } from \"../../../store/models/notify.interface\";\r\nimport { postRefreshToken } from \"../Aut/RefreshToken\";\r\nexport function getNotify() {\r\n    var bearer = 'Bearer ' + localStorage.getItem(\"access_token\");\r\n    return (dispatch: any) => {\r\n        dispatch(fetchDataRequest());\r\n        fetch(\r\n                `${process.env.REACT_APP_API_URL}/notification-database`, {\r\n                    method: \"GET\",\r\n                    headers: {\r\n                        'Authorization': bearer,\r\n                        'Content-Type': 'application/json',\r\n                        'Access-Control-Allow-Origin': `${process.env.REACT_APP_API_LOCAL}`,\r\n                        'Access-Control-Allow-Credentials': 'true'\r\n                    }\r\n                }\r\n            )\r\n            .then( response => {\r\n                if (!response.ok) {\r\n                    if (response.status === 403) {\r\n                        dispatch(postRefreshToken())\r\n                        dispatch(getNotify())\r\n                    }\r\n                    else {\r\n                        throw Error(response.statusText);\r\n                    }\r\n                }\r\n                else {\r\n                    return response.json()\r\n                }\r\n            })\r\n            .then (data => {\r\n                dispatch(removeNotifyAll())\r\n                console.log(data.body.notifications)\r\n                data.body.notifications.map((ele: any, index: any) => {\r\n                    let notification: INotify = {\r\n                        idx: ele.id,\r\n                        name: ele.name,\r\n                        description: ele.description,\r\n                        time: ele.time\r\n                    }\r\n                    console.log(ele)\r\n                    return dispatch(initialNotify(notification))\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch(fetchDataError(error));\r\n                console.log(\"error\")\r\n            });\r\n    };\r\n}","import React, { useState, Dispatch, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getNotify } from \"../../common/service/Notify/GetNotify\";\r\nimport { getUserReadNotification } from \"../../common/service/UserReadNotification/GetUserReadNotificationByUser\";\r\nimport { putUserReadNotification } from \"../../common/service/UserReadNotification/PutUserReadNotification\";\r\nimport { logout } from \"../../store/actions/account.actions\";\r\nimport { INotifyState, IStateType, IUserReadNotificationState } from \"../../store/models/root.interface\";\r\nimport \"./TopNotification.css\"\r\n\r\ntype Options = {\r\n  notification_id: number;\r\n  user_id: number;\r\n  notification_name: string;\r\n  notification_desciption: string;\r\n  notification_time: string;\r\n  is_read: boolean;\r\n}\r\n\r\nfunction TopMenuNotification(): JSX.Element {\r\n  const dispatch: Dispatch<any> = useDispatch();\r\n  const notifys: INotifyState = useSelector((state: IStateType) => state.notifys);\r\n  const user_read_notifications: IUserReadNotificationState = useSelector((state: IStateType) => state.user_read_notifications);\r\n  const [isShow, setShow] = useState(false);\r\n\r\n  var id_x = localStorage.getItem('id');\r\n  let user_id: number = 0;\r\n  if (id_x !== null) {\r\n    user_id = parseInt(id_x)\r\n  }\r\n\r\n  useEffect(() => {\r\n    dispatch(getUserReadNotification(user_id))\r\n    dispatch(getNotify())\r\n  }, [dispatch, user_id])\r\n\r\n  console.log(notifys.notifys)\r\n  console.log(user_read_notifications.user_not_readed_notifications)\r\n\r\n  let data_not_read: Options[] = [];\r\n  let total = 0;\r\n  user_read_notifications.user_not_readed_notifications.map((ele, idx) => {\r\n    return notifys.notifys.map(notification => {\r\n      if (notification.idx === ele.notification_id){\r\n        let item: Options = {\r\n          notification_id: ele.notification_id,\r\n          notification_name: notification.name,\r\n          user_id: ele.user_id,\r\n          notification_time: notification.time,\r\n          notification_desciption: notification.description,\r\n          is_read: ele.is_read\r\n        }\r\n        total ++;\r\n        return data_not_read.push(item)\r\n      }\r\n      return notification\r\n    })\r\n  })\r\n\r\n  let data_readed: Options[] = [];\r\n  user_read_notifications.user_readed_notifications.map((ele, idx) => {\r\n    return notifys.notifys.map(notification => {\r\n      if (notification.idx === ele.notification_id && total <= 6){\r\n        let item: Options = {\r\n          notification_id: ele.notification_id,\r\n          notification_name: notification.name,\r\n          user_id: ele.user_id,\r\n          notification_time: notification.time,\r\n          notification_desciption: notification.description,\r\n          is_read: ele.is_read\r\n        }\r\n        total ++;\r\n        return data_readed.push(item)\r\n      }\r\n      return notification\r\n    })\r\n  })\r\n\r\n  const history = useHistory();\r\n  const routeChange1 = (e: any) =>{ \r\n    e.preventDefault();\r\n    let path = '/notification'; \r\n      history.push({\r\n          pathname: path,\r\n      });\r\n      setShow(!isShow);\r\n  }\r\n  const routeChange = (props: Options) =>{ \r\n      setShow(!isShow)\r\n      dispatch(putUserReadNotification({\r\n        user_id: user_id,\r\n        notification_id: props.notification_id,\r\n        is_read: true\r\n      }))\r\n      localStorage.removeItem('notification_id');\r\n      localStorage.setItem('notification_id', props.notification_id.toString());\r\n      localStorage.removeItem('user_id');\r\n      localStorage.setItem('user_id', props.user_id.toString());\r\n      localStorage.removeItem('notification_name');\r\n      localStorage.setItem('notification_name', props.notification_name);\r\n      localStorage.removeItem('notification_desciption');\r\n      localStorage.setItem('notification_desciption', props.notification_desciption);\r\n      localStorage.removeItem('notification_time');\r\n      localStorage.setItem('notification_time', props.notification_time);\r\n      let path = '/notification/detail'; \r\n      history.push({\r\n          pathname: path,\r\n      });\r\n  }\r\n\r\n  return (\r\n\r\n    <li className=\"nav-item dropdown no-arrow\">\r\n\r\n\r\n      <p className=\"nav-link dropdown-toggle waves-effect waves-light\" id=\"navbarDropdownMenuLink-5\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\" onClick={() => {\r\n        setShow(!isShow);\r\n      }}>\r\n        <span className=\"badge badge-danger ml-2\">{user_read_notifications.user_not_readed_notifications.length}</span>\r\n        <i className=\"fas fa-bell\"></i>\r\n      </p>\r\n\r\n      <div className={`dropdown-menu dropdown-menu-right shadow dropdown-secondary animated--grow-in ${(isShow) ? \"show\" : \"\"} notification`}\r\n        aria-labelledby=\"userDropdown\">\r\n          <ul className=\"list-notify\">\r\n            {\r\n              data_not_read.map((ele, idx) => {\r\n                return (\r\n                  <li key={idx}>\r\n                    <p className=\"dropdown-item waves-light\"\r\n                      onClick={() => {routeChange(ele)}}\r\n                      data-toggle=\"modal\"\r\n                      data-target=\"#logoutModal\">\r\n                      <i className=\"fas fa-bell fa-sm fa-fw mr-2\"></i>\r\n                      {ele.notification_name}\r\n                      <span className=\"badge badge-danger ml-2\">*</span>\r\n                    </p>\r\n                  </li>\r\n                )\r\n              })\r\n            }\r\n          </ul>\r\n          <div className=\"view-all-notify text-center\">\r\n            <a href=\"/#\" onClick={routeChange1}>Xem toàn bộ</a>\r\n          </div>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default TopMenuNotification;\r\n","import React, { useState, Dispatch, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getNotify } from \"../../common/service/Notify/GetNotify\";\r\nimport { getUserReadNotification } from \"../../common/service/UserReadNotification/GetUserReadNotificationByUser\";\r\nimport { putUserReadNotification } from \"../../common/service/UserReadNotification/PutUserReadNotification\";\r\nimport { logout } from \"../../store/actions/account.actions\";\r\nimport { INotifyState, IStateType, IUserReadNotificationState, IUserRegisterJoinSemesterState } from \"../../store/models/root.interface\";\r\nimport \"./TopNotification.css\"\r\nimport { AiOutlineShoppingCart } from \"react-icons/ai\";\r\nimport { trackPromise } from \"react-promise-tracker\";\r\nimport { getUserRegisterJoinSemesterByPayer } from \"../../common/service/UserRegisterJoinSemester/GetUserRegisterJoinSemesterByPayer\";\r\nimport { getUserRegisterJoinSemesterByStudent } from \"../../common/service/UserRegisterJoinSemester/GetUserRegisterJoinSemesterStudent\";\r\n\r\ntype Options = {\r\n  notification_id: number;\r\n  user_id: number;\r\n  notification_name: string;\r\n  notification_desciption: string;\r\n  notification_time: string;\r\n  is_read: boolean;\r\n}\r\n\r\nfunction TopMenuCart(): JSX.Element {\r\n  const dispatch: Dispatch<any> = useDispatch();\r\n  const notifys: INotifyState = useSelector((state: IStateType) => state.notifys);\r\n  const user_read_notifications: IUserReadNotificationState = useSelector((state: IStateType) => state.user_read_notifications);\r\n  const [isShow, setShow] = useState(false);\r\n  const user_register_join_semesters: IUserRegisterJoinSemesterState = useSelector((state: IStateType) => state.user_register_join_semesters);\r\n\r\n  var id_x = localStorage.getItem('id');\r\n  let user_id: number = 0;\r\n  if (id_x !== null) {\r\n    user_id = parseInt(id_x)\r\n  }\r\n\r\n  var role = localStorage.getItem('role')\r\n  var rolePrivilege: string[] = []\r\n  var roleUser: string = \"\"\r\n  if (role !== null) {\r\n      rolePrivilege = role.split(',')\r\n      roleUser = rolePrivilege[0]\r\n  }\r\n\r\n  useEffect(() => {\r\n    dispatch(getUserReadNotification(user_id))\r\n    dispatch(getNotify())\r\n  }, [dispatch, user_id])\r\n\r\n  useEffect(() => {\r\n    if (roleUser === \"PARENT\") {\r\n      trackPromise(getUserRegisterJoinSemesterByPayer(dispatch, user_id))\r\n    }\r\n    else if (roleUser === \"STUDENT\") {\r\n      trackPromise(getUserRegisterJoinSemesterByStudent(dispatch, user_id))\r\n    }\r\n  }, [dispatch, user_id, roleUser])\r\n\r\n  console.log(notifys.notifys)\r\n  console.log(user_read_notifications.user_not_readed_notifications)\r\n\r\n  let data_not_read: Options[] = [];\r\n  let total = 0;\r\n  user_read_notifications.user_not_readed_notifications.map((ele, idx) => {\r\n    return notifys.notifys.map(notification => {\r\n      if (notification.idx === ele.notification_id){\r\n        let item: Options = {\r\n          notification_id: ele.notification_id,\r\n          notification_name: notification.name,\r\n          user_id: ele.user_id,\r\n          notification_time: notification.time,\r\n          notification_desciption: notification.description,\r\n          is_read: ele.is_read\r\n        }\r\n        total ++;\r\n        return data_not_read.push(item)\r\n      }\r\n      return notification\r\n    })\r\n  })\r\n\r\n  let data_readed: Options[] = [];\r\n  user_read_notifications.user_readed_notifications.map((ele, idx) => {\r\n    return notifys.notifys.map(notification => {\r\n      if (notification.idx === ele.notification_id && total <= 6){\r\n        let item: Options = {\r\n          notification_id: ele.notification_id,\r\n          notification_name: notification.name,\r\n          user_id: ele.user_id,\r\n          notification_time: notification.time,\r\n          notification_desciption: notification.description,\r\n          is_read: ele.is_read\r\n        }\r\n        total ++;\r\n        return data_not_read.push(item)\r\n      }\r\n      return notification\r\n    })\r\n  })\r\n\r\n  const history = useHistory();\r\n  const routeChange = (props: Options) =>{ \r\n      setShow(!isShow)\r\n      dispatch(putUserReadNotification({\r\n        user_id: user_id,\r\n        notification_id: props.notification_id,\r\n        is_read: true\r\n      }))\r\n      localStorage.removeItem('notification_id');\r\n      localStorage.setItem('notification_id', props.notification_id.toString());\r\n      localStorage.removeItem('user_id');\r\n      localStorage.setItem('user_id', props.user_id.toString());\r\n      localStorage.removeItem('notification_name');\r\n      localStorage.setItem('notification_name', props.notification_name);\r\n      localStorage.removeItem('notification_desciption');\r\n      localStorage.setItem('notification_desciption', props.notification_desciption);\r\n      localStorage.removeItem('notification_time');\r\n      localStorage.setItem('notification_time', props.notification_time);\r\n      let path = '/notification/detail'; \r\n      history.push({\r\n          pathname: path,\r\n      });\r\n  }\r\n\r\n  function routeCart() {\r\n    let path = '/cart'; \r\n    history.push({\r\n        pathname: path\r\n    });\r\n  }\r\n\r\n  if (roleUser === \"PARENT\" || roleUser === \"STUDENT\") {\r\n    return (\r\n\r\n      <li className=\"nav-item dropdown no-arrow\">\r\n  \r\n  \r\n        <p className=\"nav-link dropdown-toggle waves-effect waves-light\" id=\"navbarDropdownMenuLink-5\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\" onClick={() => {\r\n          routeCart();\r\n        }}>\r\n          <span className=\"badge badge-danger ml-2\">{user_register_join_semesters.waiting.length}</span>\r\n          <AiOutlineShoppingCart />\r\n        </p>\r\n  \r\n        <div className={`dropdown-menu dropdown-menu-right shadow dropdown-secondary animated--grow-in ${(isShow) ? \"show\" : \"\"} notification`}\r\n          aria-labelledby=\"userDropdown\">\r\n            <ul className=\"list-notify\">\r\n              {\r\n                data_not_read.map((ele, idx) => {\r\n                  return (\r\n                    <li key={idx}>\r\n                      <p className=\"dropdown-item waves-light\"\r\n                        onClick={() => {routeChange(ele)}}\r\n                        data-toggle=\"modal\"\r\n                        data-target=\"#logoutModal\">\r\n                        <i className=\"fas fa-bell fa-sm fa-fw mr-2\"></i>\r\n                        {ele.notification_name}\r\n                        <span className=\"badge badge-danger ml-2\">*</span>\r\n                      </p>\r\n                    </li>\r\n                  )\r\n                })\r\n              }\r\n  \r\n  \r\n              {\r\n                data_readed.map((ele, idx) => {\r\n                  return (\r\n                    <li>\r\n                      <p className=\"dropdown-item waves-light\"\r\n                        onClick={() => dispatch(logout())}\r\n                        data-toggle=\"modal\"\r\n                        data-target=\"#logoutModal\">\r\n                        <i className=\"fas fa-bell fa-sm fa-fw mr-2 text-gray-400\"></i>\r\n                        {ele.notification_name}\r\n                      </p>\r\n                    </li>\r\n                  )\r\n                })\r\n              }\r\n            </ul>\r\n            <div className=\"view-all-notify text-center\">\r\n              <a href=\"/notification\">Xem toàn bộ</a>\r\n            </div>\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n  else {\r\n    return (\r\n      <></>\r\n    )\r\n  }\r\n};\r\n\r\nexport default TopMenuCart;\r\n","import React from \"react\";\nimport TopMenuAccount from \"./TopMenuAccount\";\nimport \"./TopMenu.css\";\nimport { useSelector } from \"react-redux\";\nimport { IStateType, IRootPageStateType } from \"../../store/models/root.interface\";\nimport TopMenuNotification from \"./TopNotification\";\nimport TopMenuCart from \"./TopMenuCart\";\nimport { useHistory } from \"react-router-dom\";\n\nconst TopMenu: React.FC = () => {\n  const page: IRootPageStateType = useSelector((state: IStateType) => state.root.page);\n  var role = localStorage.getItem('role')\n  var rolePrivilege:string[] =[]\n  var roleUser :string =\"\"\n  if (role !== null) {\n      rolePrivilege = role.split(',')\n      roleUser = rolePrivilege[0]\n  }\n\n  const history = useHistory();\n  function handleRoute () {\n    var idxxx = localStorage.getItem('path');\n    let path: string = \"\";\n    if (idxxx != null) {\n      path = idxxx\n    }\n    console.log('hello0')\n    if (page.subArea != null) {\n      console.log('hello')\n      history.push({\n        pathname: path\n      })\n    }\n    \n  }\n\n  if (roleUser === \"ADMIN\"){\n    return (\n      <nav className=\"navbar navbar-expand navbar-light bg-custom-dark topbar mb-4 static-top shadow\">\n        <ol className=\"breadcrumb dark-breadcrumb\">\n          <li className=\"breadcrumb-item teacher-breadcrumb-item\"><p className=\"mb-2 text-gray-400\"  onClick={() => {handleRoute()}}>{page ? page.area : null} / <span>{page ? page.subArea : null}</span></p></li>\n        </ol>\n  \n        <ul className=\"navbar-nav ml-auto\">\n          <TopMenuNotification />\n          <div className=\"topbar-divider d-none d-sm-block\"></div>\n          <TopMenuAccount />\n        </ul>\n      </nav>\n    );\n  }\n  else if (roleUser === \"TEACHER\"){\n    return (\n      <nav className=\"navbar navbar-expand navbar-light bg-custom-dark topbar mb-4 static-top\" id=\"teacher_navbar\">\n        <ol className=\"breadcrumb dark-breadcrumb\" id=\"teacher_breadcrumb\">\n          <li className=\"breadcrumb-item teacher-breadcrumb-item\"><p className=\"mb-2 text-gray-400\" id=\"home-teacher\" onClick={() => {handleRoute()}}>{page ? page.area : null} / <span>{page ? page.subArea : null}</span></p></li>\n          \n        </ol>\n  \n        <ul className=\"navbar-nav ml-auto\">\n          <TopMenuNotification />\n          <div className=\"topbar-divider d-none d-sm-block\"></div>\n          <TopMenuAccount />\n        </ul>\n      </nav>\n    );\n  }\n\n  else if (roleUser === \"PARENT\" || roleUser === \"STUDENT\") {\n    return (\n      <nav className=\"navbar navbar-expand navbar-light bg-custom-dark topbar mb-4\" id=\"teacher_navbar\">\n        <ol className=\"breadcrumb dark-breadcrumb\" id=\"teacher_breadcrumb\">\n          <li className=\"breadcrumb-item teacher-breadcrumb-item\"><p className=\"mb-2 text-gray-400\" id=\"home-teacher\" onClick={() => {handleRoute()}}>{page ? page.area : null} / <span>{page ? page.subArea : null}</span></p></li>\n\n        </ol>\n  \n        <ul className=\"navbar-nav ml-auto\">\n          <TopMenuCart />\n          <div className=\"topbar-divider d-none d-sm-block\"></div>\n          <TopMenuNotification />\n          <div className=\"topbar-divider d-none d-sm-block\"></div>\n          <TopMenuAccount />\n        </ul>\n      </nav>\n    );\n  }\n  return (\n    <nav className=\"navbar navbar-expand navbar-light bg-custom-dark topbar mb-4 static-top shadow\">\n      <ol className=\"breadcrumb dark-breadcrumb\">\n          <li className=\"breadcrumb-item teacher-breadcrumb-item\"><p className=\"mb-2 text-gray-400\" id=\"home-teacher\" onClick={() => {handleRoute()}}>{page ? page.area : null} / <span>{page ? page.subArea : null}</span></p></li>\n\n      </ol>\n\n      <ul className=\"navbar-nav ml-auto\">\n        <TopMenuNotification />\n        <div className=\"topbar-divider d-none d-sm-block\"></div>\n        <TopMenuAccount />\n      </ul>\n    </nav>\n  );\n  \n};\n\nexport default TopMenu;\n"],"sourceRoot":""}