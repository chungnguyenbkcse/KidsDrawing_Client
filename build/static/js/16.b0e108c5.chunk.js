(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[16],{721:function(e,t,a){},744:function(e,t,a){"use strict";a.r(t);var n=a(137),r=a(2),l=a.n(r),o=a(79),c=a(35),i=a(10),s=a(91),m=a(143),u=a.n(m),d=a(144),p=a.n(d),g=a(145),f=a.n(g),h=a(168),b=a(156),v=a(155);var O=function(e){var t=Object(o.b)(),a=Object(o.c)((function(e){return e.users})),n=Object(o.c)((function(e){return e.teacher_register_quantifications})),m=Object(c.g)(),O=function(e){localStorage.removeItem("teacher_id"),localStorage.setItem("teacher_id",e.id.toString()),m.push({pathname:"/teacher/detail",state:{class_id:e.id}})},E=a.teachers,N={paginationSize:5,pageStartIndex:1,firstPageText:"First",prePageText:"Back",nextPageText:"Next",lastPageText:"Last",nextPageTitle:"First page",prePageTitle:"Pre page",firstPageTitle:"Next page",lastPageTitle:"Last page",showTotal:!0,totalSize:E.length,onSizePerPageChange:function(e,t){console.log("Size per page change!!!"),console.log("Newest size per page:"+e),console.log("Newest page:"+t)},onPageChange:function(e,t){console.log("Page change!!!"),console.log("Newest size per page:"+t),console.log("Newest page:"+e)}},j=[{dataField:"username",text:"T\xean \u0111\u0103ng nh\u1eadp",filter:Object(g.textFilter)()},{dataField:"email",text:"Email",filter:Object(g.textFilter)()},{dataField:"firstName",text:"H\u1ecd",filter:Object(g.textFilter)()},{dataField:"lastName",text:"T\xean",filter:Object(g.textFilter)()},{dataField:"phone",text:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",filter:Object(g.textFilter)()},{dataField:"sex",text:"H\xe0nh \u0111\u1ed9ng",formatter:function(e,t){var a=0,r=0;return n.not_approved_now.map((function(e,n){return e.teacher_id===t.id&&a++,e})),n.approveds.map((function(e,a){return e.teacher_id===t.id&&r++,e})),l.a.createElement("span",{onClick:function(){_(t.id)}},l.a.createElement("strong",{style:{color:"red",cursor:"pointer"}},r,"/",a))}},{dataField:"",text:"",formatter:function(a,n){return l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){e.onSelect&&e.onSelect(n),t(Object(i.K)(s.a.Edit))}},l.a.createElement(b.c,{className:"icon-edit"}))}},{dataField:"",text:"",formatter:function(e,t){return l.a.createElement("button",{type:"button",className:"btn btn-info",onClick:function(){O(t)}},l.a.createElement(h.a,{className:"icon-remove"}))}},{dataField:"",text:"",formatter:function(a,n){return l.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){e.onSelect&&e.onSelect(n),t(Object(i.K)(s.a.Remove))}},l.a.createElement(v.a,{className:"icon-remove"}))}}],_=function(e){localStorage.removeItem("teacher_id"),localStorage.setItem("teacher_id",e.toString()),m.push({pathname:"/teachers/request-level"})};return l.a.createElement(r.Fragment,null,l.a.createElement("div",null,l.a.createElement(d.PaginationProvider,{pagination:p()(N)},(function(e){e.paginationProps;var t=e.paginationTableProps;return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(u.a,Object.assign({hover:!0,keyField:"id",data:E,columns:j,filter:f()()},t)))))}))))},E=a(152),N=(a(721),a(89)),j=a(147),_=a(1),x=a(142),C=a(84),w=a(241),T=a(136),S=a(135),y=a(185);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var k=function(e){var t=Object(o.b)(),a=Object(o.c)((function(e){return e.users})),c=a.selectedUser,m=a.modificationState===s.a.Create;c&&!m||(c={id:0,username:"",email:"",status:"",password:"",firstName:"",lastName:"",sex:"",phone:"",address:"",dateOfBirth:"",profile_image_url:"",createTime:"",parents:0,parent:"",student_ids:[],student_names:[]});var u=Object(r.useState)({username:{error:"",value:c.username},email:{error:"",value:c.email},password:{error:"",value:c.password}}),d=Object(n.a)(u,2),p=d[0],g=d[1];function f(e){g(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach((function(t){Object(_.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},p,Object(_.a)({},e.field,{error:e.error,value:e.value})))}function h(){return p.username.error||p.email.error||!p.email.value||!p.username.value}return l.a.createElement(r.Fragment,null,l.a.createElement("div",{className:"row text-left"},l.a.createElement("div",{className:"col-xl-12 col-lg-12"},l.a.createElement("div",{className:"card shadow shadow-xx"},l.a.createElement("div",{className:"card-header py-3"},l.a.createElement("h6",{className:"m-0 font-weight-bold text-green"},m?"T\u1ea1o":"S\u1eeda"," gi\xe1o vi\xean")),l.a.createElement("div",{className:"card-body"},l.a.createElement("form",{onSubmit:function(a){if(a.preventDefault(),!h()){e.isCheck(!1);var n=m?i.x:i.A;!function(e,a){if(c){var n=T.b.loading("\u0110ang x\xe1c th\u1ef1c. Vui l\xf2ng \u0111\u1ee3i gi\xe2y l\xe1t...",{position:T.b.POSITION.TOP_CENTER});a===i.x?t(Object(w.a)({username:e.username.value,email:e.email.value,password:e.password.value,firstName:null,lastName:null,dateOfBirth:null,profile_image_url:null,sex:null,phone:null,address:null,roleName:["TEACHER"]},n)):a===i.A&&t(function e(t,a,n){var r="Bearer "+localStorage.getItem("access_token");return function(l){l(Object(i.C)()),fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/user/teacher/").concat(t),{method:"PUT",headers:{Authorization:r,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"},body:JSON.stringify(a)}).then((function(r){if(r.ok)return r;if(403!==r.status)throw Error(r.statusText);l(Object(S.a)()),l(e(t,a,n))})).then((function(e){console.log(e),console.log(t),T.b.update(n,{render:"Ch\u1ec9nh th\xf4ng tin t\xe0i kho\u1ea3n th\xe0nh c\xf4ng",type:"success",isLoading:!1,position:T.b.POSITION.TOP_CENTER,autoClose:1e3}),Object(y.a)(l)})).catch((function(e){T.b.update(t,{render:"Ch\u1ec9nh th\xf4ng tin t\xe0i kho\u1ea3n kh\xf4ng th\xe0nh c\xf4ng",type:"error",isLoading:!1,position:T.b.POSITION.TOP_CENTER,closeButton:!0}),console.log("error")}))}}(c.id,{username:e.username.value,email:e.email.value},n)),t(Object(C.c)("Gi\xe1o vi\xean"," ".concat(e.username.value," ch\u1ec9nh b\u1edfi b\u1ea1n"))),t(Object(i.z)()),t(Object(i.K)(s.a.None))}}(p,n)}}},l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement(x.a,{id:"input_username",field:"username",value:p.username.value,onChange:f,required:!0,maxLength:100,label:"T\xean \u0111\u0103ng nh\u1eadp",placeholder:""})),l.a.createElement("div",{className:"form-group col-md-6"},l.a.createElement(x.a,{id:"input_email",field:"email",value:p.email.value,onChange:f,required:!0,maxLength:200,label:"Email",placeholder:""}))),l.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.isCheck(!1),void t(Object(i.K)(s.a.None))}},"H\u1ee7y"),l.a.createElement("button",{type:"submit",className:"btn btn-success left-margin ".concat(h()?"disabled":"")},"L\u01b0u")))))))},I=a(255);var F=function(e){var t=Object(o.b)(),a=Object(o.c)((function(e){return e.users})),c=a.selectedUser,m=a.modificationState===s.a.Create;function u(e,a){var n=T.b.loading("\u0110ang x\xe1c th\u1ef1c. Vui l\xf2ng \u0111\u1ee3i gi\xe2y l\xe1t...",{position:T.b.POSITION.TOP_CENTER});c&&(console.log({username:e.username,email:e.email,password:null,firstName:null,lastName:null,dateOfBirth:null,profile_image_url:null,sex:null,phone:null,address:null,roleName:["TEACHER"]}),a===i.x&&t(Object(w.a)({username:e.username,email:e.email,password:null,firstName:null,lastName:null,dateOfBirth:null,profile_image_url:null,sex:null,phone:null,address:null,roleName:["TEACHER"]},n)))}c&&!m||(c={id:0,username:"",email:"",status:"",password:"",firstName:"",lastName:"",sex:"",phone:"",address:"",dateOfBirth:"",profile_image_url:"",createTime:"",parents:0,parent:"",student_ids:[],student_names:[]});var d=Object(r.useState)(),p=Object(n.a)(d,2),g=p[0],f=p[1];return l.a.createElement(r.Fragment,null,l.a.createElement("div",{className:"row text-left"},l.a.createElement("div",{className:"col-xl-12 col-lg-12"},l.a.createElement("div",{className:"card shadow mb-4"},l.a.createElement("div",{className:"card-header py-3"},l.a.createElement("h6",{className:"m-0 font-weight-bold text-green"},m?"T\u1ea1o":"S\u1eeda"," gi\xe1o vi\xean")),l.a.createElement("div",{className:"card-body"},l.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.isCheck(!1);var n=g,r=new FileReader;r.onload=function(e){!function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";console.log("hello");var n=e.slice(0,e.indexOf("\n")).split(a);console.log(n);var r=e.slice(e.indexOf("\n")+1).split("\n"),l=["username","email"],o=r.map((function(e){var t=e.split(a);return l.reduce((function(e,a,n){return e[a]=t[n],e}),{})}));console.log(o),o.map((function(e,a){if(""!==e.username){var n={username:e.username,email:e.email};console.log(n),u(n,i.x),t(Object(C.c)("Gi\xe1o vi\xean"," ".concat(n.username," ch\u1ec9nh b\u1edfi b\u1ea1n"))),t(Object(i.z)()),t(Object(i.K)(s.a.None))}return 0}))}(e.target.result)},r.readAsText(n)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"profile_image"},"Ch\u1ecdn file (.xml):"),l.a.createElement("input",{type:"file",accept:".csv,.xlsx,.xls",id:"csvFile",onChange:function(e){f(e.target.files[0])}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("a",{href:"".concat("http://localhost:3000","\\example.csv")},"File m\u1eabu")),l.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.isCheck(!1),void t(Object(i.K)(s.a.None))}},"H\u1ee7y"),l.a.createElement("button",{type:"submit",className:"btn btn-success left-margin ".concat(g?"":"disabled")},"L\u01b0u")))))))},A=a(9);function R(e){var t="Bearer "+localStorage.getItem("access_token");return fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/teacher-register-level"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"}}).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw Error(t.statusText);e(Object(S.a)()),e(R(e))})).then((function(t){e(Object(A.F)(t)),e(Object(A.J)()),e(Object(A.L)()),e(Object(A.K)()),console.log(t.body.teacher_register_qualification),t.body.teacher_register_qualification.map((function(t,a){var n={id:t.id,teacher_id:t.teacher_id,reviewer_id:t.reviewer_id,teacher_name:t.teacher_name,course_id:t.course_id,course_name:t.course_name,art_age_name:t.art_age_name,art_level_name:t.art_level_name,art_type_name:t.art_type_name,degree_photo_url:t.degree_photo_url,status:t.status};return"Approved"===t.status?e(0===a?Object(A.G)(n):Object(A.w)(n)):"Not approve now"===t.status?e(0===a?Object(A.I)(n):Object(A.y)(n)):e(0===a?Object(A.H)(n):Object(A.x)(n))}))})).catch((function(t){e(Object(A.D)(t)),console.log("error")}))}var z=a(83),B=a(140),L=a(139),D=a(722),H=a.n(D);t.default=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.users})),a=Object(o.c)((function(e){return e.root.page})),c=t.teachers.length,m=Object(r.useState)(!1),u=Object(n.a)(m,2),d=u[0],p=u[1],g=Object(L.usePromiseTracker)().promiseInProgress,f=Object(r.useState)([]),h=Object(n.a)(f,2),b=h[0],v=h[1];console.log(b);var _=localStorage.getItem("access_token"),x=localStorage.getItem("refresh_token");function C(){p(!0)}function P(e){p(e)}return Object(r.useEffect)((function(){if(null!==_&&null!==x&&void 0!==_&&void 0!==x){var t=Object(B.a)(_),a=Object(B.a)(x),n=t.exp,r=a.exp,l=Date.now()/1e3;console.log(n),console.log(l),n<l&&r<l?(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("username"),localStorage.removeItem("role"),localStorage.removeItem("id"),localStorage.removeItem("contest_id"),localStorage.removeItem("schedule_id"),e(Object(z.d)())):(Object(L.trackPromise)(Object(y.a)(e)),Object(L.trackPromise)(R(e)))}}),[e,_,x]),Object(r.useEffect)((function(){e(Object(i.z)()),e(Object(N.b)("Gi\xe1o vi\xean","Danh s\xe1ch"))}),[a.area,e]),g?l.a.createElement("div",{className:"loader"}):l.a.createElement(r.Fragment,null,l.a.createElement(T.a,null),l.a.createElement("h1",{className:"h3 mb-2 text-gray-800"},"Gi\xe1o vi\xean"),l.a.createElement("p",{className:"mb-4"},"Th\xf4ng tin chung"),l.a.createElement("div",{className:"row"},l.a.createElement(E.a,{title:"GI\xc1O VI\xcaN",text:"".concat(c),icon:"user",class:"primary"}),l.a.createElement("div",{className:"col-xl-2 col-lg-2"},l.a.createElement("div",null,l.a.createElement("h6",{className:"m-0 font-weight-bold text-green"},"Import")),l.a.createElement("div",null,l.a.createElement("a",{className:"m-0 font-weight-bold",href:"https://recording-jitsi-chung.s3.ap-southeast-1.amazonaws.com/Asset/example.csv"},"File m\u1eabu")),l.a.createElement("div",null,l.a.createElement(H.a,{cssClass:"csv-reader-input import-teacher",label:"",onFileLoaded:function(e,t){if(0===e.length)T.b.error("File kh\xf4ng ch\u01b0a d\u1eef li\u1ec7u",{position:T.b.POSITION.TOP_CENTER,autoClose:1e3});else{for(var a=!0,n=0;n<e.length;n++){var r=e[n];if(null===r.username||""===r.username||null===r.email||""===r.email){T.b.error("L\u1ed7i t\u1ea1i d\xf2ng ".concat(n+1),{position:T.b.POSITION.TOP_CENTER,autoClose:1e3}),a=!1;break}}!0===a&&v(e)}},parserOptions:{header:!0,dynamicTyping:!0,skipEmptyLines:!0,transformHeader:function(e){return e.toLowerCase().replace(/\W/g,"_")}}}))),l.a.createElement("div",{className:"col-xl-2 col-lg-2 btn-import-teacher"},l.a.createElement("button",{type:"button",className:"btn btn-success left-margin mt-2 ".concat(0===b.length?"disabled":""),onClick:function(){if(!1===(0===b.length)){var t=T.b.loading("\u0110ang x\xe1c th\u1ef1c. Vui l\xf2ng \u0111\u1ee3i gi\xe2y l\xe1t...",{position:T.b.POSITION.TOP_CENTER});e(function e(t,a,n){var r="Bearer "+localStorage.getItem("access_token");return function(l){l(Object(i.C)()),fetch("".concat("https://ec2-54-169-51-72.ap-southeast-1.compute.amazonaws.com/api/v1","/user/teacher"),{method:"POST",headers:{Authorization:r,"Content-Type":"application/json","Access-Control-Allow-Origin":"".concat("http://localhost:3000"),"Access-Control-Allow-Credentials":"true"},body:JSON.stringify(t)}).then((function(r){if(r.ok)return r;if(403!==r.status)throw Error(r.statusText);l(Object(S.a)()),l(e(t,a,n))})).then((function(t){console.log(t),console.log(a),a.length>1?l(e({username:a[0].username,email:a[0].email,password:a[0].password,firstName:null,lastName:null,dateOfBirth:null,profile_image_url:null,sex:null,phone:null,address:null,roleName:["TEACHER"]},a.slice(1,a.length),n)):1===a.length&&l(Object(w.a)({username:a[0].username,email:a[0].email,password:a[0].password,firstName:null,lastName:null,dateOfBirth:null,profile_image_url:null,sex:null,phone:null,address:null,roleName:["TEACHER"]},n))})).catch((function(e){}))}}({username:b[0].username,email:b[0].email,password:null,firstName:null,lastName:null,dateOfBirth:null,profile_image_url:null,sex:null,phone:null,address:null,roleName:["TEACHER"]},b.slice(1,b.length),t))}}},"G\u1eedi"))),l.a.createElement("div",{className:"row mt-2"},l.a.createElement("div",{className:"col-xl-12 col-lg-12"},l.a.createElement("div",{className:"card shadow mb-4"},l.a.createElement("div",{className:"card-header py-3"},l.a.createElement("h6",{className:"m-0 font-weight-bold text-green"},"Danh s\xe1ch gi\xe1o vi\xean"),l.a.createElement("div",{className:"header-buttons"},l.a.createElement("button",{className:"btn btn-success btn-green",onClick:function(){e(Object(i.K)(s.a.Create)),C()}},l.a.createElement("i",{className:"fas fa fa-plus"}),"Th\xeam th\u1ee7 c\xf4ng"))),l.a.createElement("div",{className:"card-body"},l.a.createElement(O,{onSelect:function(t){e(Object(i.y)(t)),C(),e(Object(i.K)(s.a.None))}}))))),l.a.createElement(j.a,{open:d,onClose:function(){return p(!1)},closeOnDocumentClick:!0},l.a.createElement(l.a.Fragment,null,t.modificationState===s.a.Create||t.selectedUser&&t.modificationState===s.a.Edit?l.a.createElement(k,{isCheck:P}):t.modificationState===s.a.ImportFile?l.a.createElement(F,{isCheck:P}):void 0)),function(){if(t.selectedUser&&t.modificationState===s.a.Remove)return l.a.createElement(j.a,{open:d,onClose:function(){return p(!1)},closeOnDocumentClick:!0},l.a.createElement("div",{className:"popup-modal",id:"popup-modal"},l.a.createElement("div",{className:"popup-title"},"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a?"),l.a.createElement("div",{className:"popup-content"},l.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){if(t.selectedUser){var a=T.b.loading("\u0110ang x\xe1c th\u1ef1c. Vui l\xf2ng \u0111\u1ee3i gi\xe2y l\xe1t...",{position:T.b.POSITION.TOP_CENTER});Object(I.a)(e,t.selectedUser.id,a),e(Object(i.z)()),p(!1)}}},"Remove"))))}())}}}]);
//# sourceMappingURL=16.b0e108c5.chunk.js.map